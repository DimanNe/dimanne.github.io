
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="..">
      
      
        <link rel="next" href="../Rust/">
      
      
        
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.44+insiders-4.53.14">
    
    
      
        <title>C++ - My Docs</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.12320a83.min.css">
      
      
  
  
    
    
  
    
    
  
  
  <style>:root{--md-admonition-icon--failure:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M2.344 2.343za8 8 0 0 1 11.314 11.314A8.002 8.002 0 0 1 .234 10.089a8 8 0 0 1 2.11-7.746m1.06 10.253a6.5 6.5 0 1 0 9.108-9.275 6.5 6.5 0 0 0-9.108 9.275M6.03 4.97 8 6.94l1.97-1.97a.749.749 0 0 1 1.275.326.75.75 0 0 1-.215.734L9.06 8l1.97 1.97a.749.749 0 0 1-.326 1.275.75.75 0 0 1-.734-.215L8 9.06l-1.97 1.97a.749.749 0 0 1-1.275-.326.75.75 0 0 1 .215-.734L6.94 8 4.97 6.03a.75.75 0 0 1 .018-1.042.75.75 0 0 1 1.042-.018"/></svg>');--md-admonition-icon--bug:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path d="M4.72.22a.75.75 0 0 1 1.06 0l1 .999a3.5 3.5 0 0 1 2.441 0l.999-1a.748.748 0 0 1 1.265.332.75.75 0 0 1-.205.729l-.775.776c.616.63.995 1.493.995 2.444v.327q0 .15-.025.292c.408.14.764.392 1.029.722l1.968-.787a.75.75 0 0 1 .556 1.392L13 7.258V9h2.25a.75.75 0 0 1 0 1.5H13v.5q-.002.615-.141 1.186l2.17.868a.75.75 0 0 1-.557 1.392l-2.184-.873A5 5 0 0 1 8 16a5 5 0 0 1-4.288-2.427l-2.183.873a.75.75 0 0 1-.558-1.392l2.17-.868A5 5 0 0 1 3 11v-.5H.75a.75.75 0 0 1 0-1.5H3V7.258L.971 6.446a.75.75 0 0 1 .558-1.392l1.967.787c.265-.33.62-.583 1.03-.722a1.7 1.7 0 0 1-.026-.292V4.5c0-.951.38-1.814.995-2.444L4.72 1.28a.75.75 0 0 1 0-1.06m.53 6.28a.75.75 0 0 0-.75.75V11a3.5 3.5 0 1 0 7 0V7.25a.75.75 0 0 0-.75-.75ZM6.173 5h3.654A.17.17 0 0 0 10 4.827V4.5a2 2 0 1 0-4 0v.327c0 .096.077.173.173.173"/></svg>');}</style>



    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#c" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="My Docs" class="md-header__button md-logo" aria-label="My Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            My Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              C++
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
    
  
  MkDocs

      </a>
    </li>
  

      
        
  
  
    
  
  
    <li class="md-tabs__item md-tabs__item--active">
      <a href="./" class="md-tabs__link">
        
  
    
  
  C++

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../Rust/" class="md-tabs__link">
        
  
    
  
  Rust

      </a>
    </li>
  

      
        
  
  
  
    
    
      
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../English/Grammar/01.Infinitive/" class="md-tabs__link">
          
  
  English

        </a>
      </li>
    
  

    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../Linux/alternatives/" class="md-tabs__link">
          
  
  Linux

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="My Docs" class="md-nav__button md-logo" aria-label="My Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    My Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    MkDocs
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    
  
    C++
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    
  
    C++
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#talks-articles" class="md-nav__link">
    <span class="md-ellipsis">
      
        Talks &amp; Articles
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Talks & Articles">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#signed-vs-unsigned-ints-performance-wise" class="md-nav__link">
    <span class="md-ellipsis">
      
        signed vs unsigned int&rsquo;s &mdash; performance-wise
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#non-constant-constant-exspressions-in-c" class="md-nav__link">
    <span class="md-ellipsis">
      
        Non-constant constant-exspressions in C++
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#when-fences-and-weak-ordering-needed" class="md-nav__link">
    <span class="md-ellipsis">
      
        When fences and weak ordering needed
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c17-overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        C++17 overview
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c-and-exceptions" class="md-nav__link">
    <span class="md-ellipsis">
      
        C++ and exceptions
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#embracing-and-also-destroying-variant-types-safely-andrei-alexandrescu-cppcon-2021" class="md-nav__link">
    <span class="md-ellipsis">
      
        Embracing (and also Destroying) Variant Types Safely - Andrei Alexandrescu - CppCon 2021
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clang-libast" class="md-nav__link">
    <span class="md-ellipsis">
      
        clang libAST
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unwinding-a-stack-by-hand-with-frame-pointers-and-orc" class="md-nav__link">
    <span class="md-ellipsis">
      
        Unwinding a Stack by Hand with Frame Pointers and ORC
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#early-return-patter" class="md-nav__link">
    <span class="md-ellipsis">
      
        Early return patter
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#total-functions-vs-partial-functions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Total functions vs Partial functions
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#simd-in-c20" class="md-nav__link">
    <span class="md-ellipsis">
      
        SIMD in C++20
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generate-tuple-consisting-of-n-types" class="md-nav__link">
    <span class="md-ellipsis">
      
        Generate tuple consisting of N types
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ranges" class="md-nav__link">
    <span class="md-ellipsis">
      
        Ranges
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Ranges">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#projection-the-3rd-argument" class="md-nav__link">
    <span class="md-ellipsis">
      
        Projection &mdash; the 3rd argument
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#views-compositon" class="md-nav__link">
    <span class="md-ellipsis">
      
        Views compositon &mdash; |:
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#temporary-ranges-stdrangesdangling" class="md-nav__link">
    <span class="md-ellipsis">
      
        temporary ranges &amp; std::ranges::dangling
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eraseremove-idiom" class="md-nav__link">
    <span class="md-ellipsis">
      
        Erase–remove idiom
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#concepts" class="md-nav__link">
    <span class="md-ellipsis">
      
        Concepts
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Concepts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#constraining-return-type" class="md-nav__link">
    <span class="md-ellipsis">
      
        Constraining return type
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#constraints-for-multiple-types" class="md-nav__link">
    <span class="md-ellipsis">
      
        Constraints for multiple types
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-concepts-as-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      
        Using concepts as parameters
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-concepts-as-return-types" class="md-nav__link">
    <span class="md-ellipsis">
      
        Using concepts as return types
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reference-collapsing-rules" class="md-nav__link">
    <span class="md-ellipsis">
      
        Reference collapsing rules
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#auto-vs-decltype" class="md-nav__link">
    <span class="md-ellipsis">
      
        auto vs decltype
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rvo-urvo-nrvo" class="md-nav__link">
    <span class="md-ellipsis">
      
        RVO / URVO / NRVO
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lesser-known-c-std-algorithms" class="md-nav__link">
    <span class="md-ellipsis">
      
        Lesser known C++ std algorithms
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Lesser known C++ std algorithms">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#uncategorised" class="md-nav__link">
    <span class="md-ellipsis">
      
        Uncategorised
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#non-modifying-sequence-operations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Non-modifying sequence operations
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modifying-sequence-operations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Modifying sequence operations
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sort-related" class="md-nav__link">
    <span class="md-ellipsis">
      
        Sort related
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minimummaximum" class="md-nav__link">
    <span class="md-ellipsis">
      
        Minimum/maximum
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#c-core-guidelines-excerpts" class="md-nav__link">
    <span class="md-ellipsis">
      
        C++ Core Guidelines excerpts
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="C++ Core Guidelines excerpts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#c138-create-an-overload-set-for-a-derived-class-and-its-bases-with-using" class="md-nav__link">
    <span class="md-ellipsis">
      
        C.138: Create an overload set for a derived class and its bases with using
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="C.138: Create an overload set for a derived class and its bases with using">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reason" class="md-nav__link">
    <span class="md-ellipsis">
      
        Reason
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note" class="md-nav__link">
    <span class="md-ellipsis">
      
        Note
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c165-use-using-for-customization-points" class="md-nav__link">
    <span class="md-ellipsis">
      
        C.165: Use using for customization points
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="C.165: Use using for customization points">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reason_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Reason
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c129-when-designing-a-class-hierarchy-distinguish-between-implementation-inheritance-and-interface-inheritance" class="md-nav__link">
    <span class="md-ellipsis">
      
        C.129: When designing a class hierarchy, distinguish between implementation inheritance and interface inheritance
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="C.129: When designing a class hierarchy, distinguish between implementation inheritance and interface inheritance">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reason_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        Reason
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Note
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dual-hierarchy" class="md-nav__link">
    <span class="md-ellipsis">
      
        Dual hierarchy
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        Note
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        Note
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#r37-do-not-pass-a-pointer-or-reference-obtained-from-an-aliased-smart-pointer" class="md-nav__link">
    <span class="md-ellipsis">
      
        R.37: Do not pass a pointer or reference obtained from an aliased smart pointer
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="R.37: Do not pass a pointer or reference obtained from an aliased smart pointer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reason_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        Reason
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        Note
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#es50-dont-cast-away-const" class="md-nav__link">
    <span class="md-ellipsis">
      
        ES.50: Don&rsquo;t cast away const
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ES.50: Don’t cast away const">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reason_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        Reason
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exception" class="md-nav__link">
    <span class="md-ellipsis">
      
        Exception
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../Rust/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Rust
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    
  
    English
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    English
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    
  
    Grammar
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Grammar
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../English/Grammar/01.Infinitive/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Infinitive
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../English/Grammar/02.-ing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    -ing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../English/Grammar/03.ModalVerbs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Modal Verbs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../English/Grammar/04.SomethingFollowedBySomething/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    something followed by something rules
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../English/Grammar/05.Articles/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Articles
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../English/Grammar/06.Other/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Other
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../English/Grammar/07.UnitsFromMurphy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Some units from Murphy
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    
  
    Vocabulary
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Vocabulary
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../English/Vocabulary/10.RareWords/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Rare Words
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../English/Vocabulary/20.WordUsage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Word Usage
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../English/Vocabulary/30.PhrasesIdiomsCollacations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Phrases, Idioms & Collacations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../English/Vocabulary/40.CommonWordsUncommonMeaning/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Common words with uncommon meaning
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../English/Vocabulary/41.ReplacementForVery/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Replacement for "very"
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../English/Vocabulary/42.UAndNonU/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    U and Non-U
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../English/Vocabulary/43.CollectiveNouns/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Collective Nouns
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../English/Vocabulary/44.ReportingVerbs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Reporting Verbs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../English/Vocabulary/45.WaysOfMoving/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Ways of Moving
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../English/Vocabulary/46.RelatedWords/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Related Words
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../English/Vocabulary/50.LinkingWords/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Linking Words
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../English/Vocabulary/55.Conjunctions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Conjunction
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../English/Vocabulary/90.Prefixes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Prefixes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../English/Vocabulary/91.Suffixes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Suffixes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    
  
    Linux
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Linux
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Linux/alternatives/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Alternatives
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Linux/apt_repos/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    apt repos
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Linux/certificates/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Certificates
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Linux/disks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Disks
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Linux/network/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Network
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Linux/secure_boot/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Secure boot
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Linux/software/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Software
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Linux/tools_and_utils/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Tools & Utils
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Linux/usb_udev/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    usb & udev
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Linux/video_editing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Video editing
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_11" >
        
          
          <label class="md-nav__link" for="__nav_5_11" id="__nav_5_11_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    
  
    Apps
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_11">
            <span class="md-nav__icon md-icon"></span>
            
  
    Apps
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Linux/apps/bash/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    bash
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Linux/apps/cmake/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    cmake
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Linux/apps/fail2ban/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Fail2Ban
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Linux/apps/git/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    git
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Linux/apps/lldb/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    lldb
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Linux/apps/openssl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    OpenSSL
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Linux/apps/qt_qtcreator/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Qt & QtCreator
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Linux/apps/ripgrep/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    ripgrep
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Linux/apps/screen/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    screen
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Linux/apps/sql/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    SQL
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Linux/apps/ssh/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    ssh
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Linux/apps/strace/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    strace
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Linux/apps/systemd/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    systemd
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_12" >
        
          
          <label class="md-nav__link" for="__nav_5_12" id="__nav_5_12_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    
  
    Performance
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_12">
            <span class="md-nav__icon md-icon"></span>
            
  
    Performance
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Linux/performance/010.performance/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Performance
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Linux/performance/020.concurrency/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Concurrency
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Linux/performance/030.memory/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    memory usage
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Linux/performance/040.asm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    asm
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Linux/performance/050.Gregg/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Brendan Gregg
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Linux/performance/110.tools-orbit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Tools: orbit
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Linux/performance/120.tools-perf/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    
  
    Tools: perf
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#talks-articles" class="md-nav__link">
    <span class="md-ellipsis">
      
        Talks &amp; Articles
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Talks & Articles">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#signed-vs-unsigned-ints-performance-wise" class="md-nav__link">
    <span class="md-ellipsis">
      
        signed vs unsigned int&rsquo;s &mdash; performance-wise
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#non-constant-constant-exspressions-in-c" class="md-nav__link">
    <span class="md-ellipsis">
      
        Non-constant constant-exspressions in C++
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#when-fences-and-weak-ordering-needed" class="md-nav__link">
    <span class="md-ellipsis">
      
        When fences and weak ordering needed
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c17-overview" class="md-nav__link">
    <span class="md-ellipsis">
      
        C++17 overview
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c-and-exceptions" class="md-nav__link">
    <span class="md-ellipsis">
      
        C++ and exceptions
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#embracing-and-also-destroying-variant-types-safely-andrei-alexandrescu-cppcon-2021" class="md-nav__link">
    <span class="md-ellipsis">
      
        Embracing (and also Destroying) Variant Types Safely - Andrei Alexandrescu - CppCon 2021
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clang-libast" class="md-nav__link">
    <span class="md-ellipsis">
      
        clang libAST
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unwinding-a-stack-by-hand-with-frame-pointers-and-orc" class="md-nav__link">
    <span class="md-ellipsis">
      
        Unwinding a Stack by Hand with Frame Pointers and ORC
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#early-return-patter" class="md-nav__link">
    <span class="md-ellipsis">
      
        Early return patter
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#total-functions-vs-partial-functions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Total functions vs Partial functions
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#simd-in-c20" class="md-nav__link">
    <span class="md-ellipsis">
      
        SIMD in C++20
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generate-tuple-consisting-of-n-types" class="md-nav__link">
    <span class="md-ellipsis">
      
        Generate tuple consisting of N types
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ranges" class="md-nav__link">
    <span class="md-ellipsis">
      
        Ranges
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Ranges">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#projection-the-3rd-argument" class="md-nav__link">
    <span class="md-ellipsis">
      
        Projection &mdash; the 3rd argument
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#views-compositon" class="md-nav__link">
    <span class="md-ellipsis">
      
        Views compositon &mdash; |:
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#temporary-ranges-stdrangesdangling" class="md-nav__link">
    <span class="md-ellipsis">
      
        temporary ranges &amp; std::ranges::dangling
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eraseremove-idiom" class="md-nav__link">
    <span class="md-ellipsis">
      
        Erase–remove idiom
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#concepts" class="md-nav__link">
    <span class="md-ellipsis">
      
        Concepts
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Concepts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#constraining-return-type" class="md-nav__link">
    <span class="md-ellipsis">
      
        Constraining return type
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#constraints-for-multiple-types" class="md-nav__link">
    <span class="md-ellipsis">
      
        Constraints for multiple types
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-concepts-as-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      
        Using concepts as parameters
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#using-concepts-as-return-types" class="md-nav__link">
    <span class="md-ellipsis">
      
        Using concepts as return types
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reference-collapsing-rules" class="md-nav__link">
    <span class="md-ellipsis">
      
        Reference collapsing rules
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#auto-vs-decltype" class="md-nav__link">
    <span class="md-ellipsis">
      
        auto vs decltype
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#rvo-urvo-nrvo" class="md-nav__link">
    <span class="md-ellipsis">
      
        RVO / URVO / NRVO
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#lesser-known-c-std-algorithms" class="md-nav__link">
    <span class="md-ellipsis">
      
        Lesser known C++ std algorithms
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Lesser known C++ std algorithms">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#uncategorised" class="md-nav__link">
    <span class="md-ellipsis">
      
        Uncategorised
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#non-modifying-sequence-operations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Non-modifying sequence operations
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#modifying-sequence-operations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Modifying sequence operations
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sort-related" class="md-nav__link">
    <span class="md-ellipsis">
      
        Sort related
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#minimummaximum" class="md-nav__link">
    <span class="md-ellipsis">
      
        Minimum/maximum
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#c-core-guidelines-excerpts" class="md-nav__link">
    <span class="md-ellipsis">
      
        C++ Core Guidelines excerpts
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="C++ Core Guidelines excerpts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#c138-create-an-overload-set-for-a-derived-class-and-its-bases-with-using" class="md-nav__link">
    <span class="md-ellipsis">
      
        C.138: Create an overload set for a derived class and its bases with using
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="C.138: Create an overload set for a derived class and its bases with using">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reason" class="md-nav__link">
    <span class="md-ellipsis">
      
        Reason
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note" class="md-nav__link">
    <span class="md-ellipsis">
      
        Note
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c165-use-using-for-customization-points" class="md-nav__link">
    <span class="md-ellipsis">
      
        C.165: Use using for customization points
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="C.165: Use using for customization points">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reason_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Reason
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c129-when-designing-a-class-hierarchy-distinguish-between-implementation-inheritance-and-interface-inheritance" class="md-nav__link">
    <span class="md-ellipsis">
      
        C.129: When designing a class hierarchy, distinguish between implementation inheritance and interface inheritance
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="C.129: When designing a class hierarchy, distinguish between implementation inheritance and interface inheritance">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reason_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        Reason
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Note
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dual-hierarchy" class="md-nav__link">
    <span class="md-ellipsis">
      
        Dual hierarchy
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        Note
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        Note
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#r37-do-not-pass-a-pointer-or-reference-obtained-from-an-aliased-smart-pointer" class="md-nav__link">
    <span class="md-ellipsis">
      
        R.37: Do not pass a pointer or reference obtained from an aliased smart pointer
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="R.37: Do not pass a pointer or reference obtained from an aliased smart pointer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reason_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        Reason
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        Note
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#es50-dont-cast-away-const" class="md-nav__link">
    <span class="md-ellipsis">
      
        ES.50: Don&rsquo;t cast away const
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ES.50: Don’t cast away const">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reason_4" class="md-nav__link">
    <span class="md-ellipsis">
      
        Reason
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_2" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#exception" class="md-nav__link">
    <span class="md-ellipsis">
      
        Exception
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example_3" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="c"><strong>C++</strong><a class="headerlink" href="#c" title="Permanent link">&para;</a></h1>
<hr />
<h2 id="talks-articles"><strong>Talks &amp; Articles</strong><a class="headerlink" href="#talks-articles" title="Permanent link">&para;</a></h2>
<h3 id="signed-vs-unsigned-ints-performance-wise"><code>signed</code> vs <code>unsigned int</code>&rsquo;s &mdash; performance-wise<a class="headerlink" href="#signed-vs-unsigned-ints-performance-wise" title="Permanent link">&para;</a></h3>
<p><a href="https://youtu.be/yG1OZ69H_-o?t=3094">CppCon 2016: Chandler Carruth</a></p>
<h3 id="non-constant-constant-exspressions-in-c">Non-constant constant-exspressions in C++<a class="headerlink" href="#non-constant-constant-exspressions-in-c" title="Permanent link">&para;</a></h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1">1</a></span>
<span class="normal"><a href="#__codelineno-0-2">2</a></span>
<span class="normal"><a href="#__codelineno-0-3">3</a></span>
<span class="normal"><a href="#__codelineno-0-4">4</a></span>
<span class="normal"><a href="#__codelineno-0-5">5</a></span>
<span class="normal"><a href="#__codelineno-0-6">6</a></span>
<span class="normal"><a href="#__codelineno-0-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="c1">// &lt;insert solution here&gt;</span>
<a id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-0-3" name="__codelineno-0-3"></a><span class="w">   </span><span class="k">constexpr</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="p">();</span>
<a id="__codelineno-0-4" name="__codelineno-0-4"></a><span class="w">   </span><span class="k">constexpr</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="p">();</span>
<a id="__codelineno-0-5" name="__codelineno-0-5"></a>
<a id="__codelineno-0-6" name="__codelineno-0-6"></a><span class="w">   </span><span class="k">static_assert</span><span class="w"> </span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">b</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;fail&quot;</span><span class="p">);</span>
<a id="__codelineno-0-7" name="__codelineno-0-7"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p><a href="https://b.atch.se/posts/non-constant-constant-expressions/">Solution</a>.</p>
<h3 id="when-fences-and-weak-ordering-needed">When fences and weak ordering needed<a class="headerlink" href="#when-fences-and-weak-ordering-needed" title="Permanent link">&para;</a></h3>
<p><a href="https://www.youtube.com/watch?v=M15UKpNlpeM&amp;ab_channel=CppCon">CppCon 2016: Hans Boehm “Using weakly ordered C++ atomics correctly&rdquo;</a></p>
<h3 id="c17-overview">C++17 overview<a class="headerlink" href="#c17-overview" title="Permanent link">&para;</a></h3>
<p><a href="https://jfbastien.com/what-is-cpp17/#/">Here</a></p>
<h3 id="c-and-exceptions">C++ and exceptions<a class="headerlink" href="#c-and-exceptions" title="Permanent link">&para;</a></h3>
<p><a href="https://www.reddit.com/r/cpp/comments/cliw5j/should_not_exceptions_be_finally_deprecated/">reddit</a></p>
<h3 id="embracing-and-also-destroying-variant-types-safely-andrei-alexandrescu-cppcon-2021"><a href="https://www.youtube.com/watch?v=va9I2qivBOA&amp;ab_channel=CppCon">Embracing (and also Destroying) Variant Types Safely - Andrei Alexandrescu - CppCon 2021</a><a class="headerlink" href="#embracing-and-also-destroying-variant-types-safely-andrei-alexandrescu-cppcon-2021" title="Permanent link">&para;</a></h3>
<ul>
<li>Usage of parameter packs (<code>head</code>, <code>tail</code>, <code>type_sequence</code>).</li>
</ul>
<h3 id="clang-libast">clang libAST<a class="headerlink" href="#clang-libast" title="Permanent link">&para;</a></h3>
<p><a href="https://www.youtube.com/watch?v=icvNkYextOo&amp;ab_channel=CppCon">An example of parsing C++ code</a>.</p>
<h3 id="unwinding-a-stack-by-hand-with-frame-pointers-and-orc">Unwinding a Stack by Hand with Frame Pointers and ORC<a class="headerlink" href="#unwinding-a-stack-by-hand-with-frame-pointers-and-orc" title="Permanent link">&para;</a></h3>
<p><a href="https://blogs.oracle.com/linux/post/unwinding-stack-frame-pointers-and-orc">A great article</a> about stack unwinding.</p>
<p>Getting symbol names by their addresses:
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>addr2line<span class="w"> </span>-e<span class="w"> </span>/usr/lib/debug/lib/modules/5.4.17-2136.304.4.1.el8uek.x86_64/vmlinux<span class="w"> </span><span class="se">\</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="w">            </span>-j<span class="w"> </span>.text<span class="w"> </span>-ipfas<span class="w">                                                       </span><span class="se">\</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="w">            </span>0x30d178<span class="w"> </span>0x2fb393<span class="w"> </span>0x2fc1c9<span class="w"> </span>0x2fd20d<span class="w"> </span>0x301a80<span class="w"> </span>0x301c3e<span class="w"> </span>0x2f4437<span class="w"> </span>0x2f55e4<span class="w"> </span>0x2f5644<span class="w"> </span>0x44f0<span class="w"> </span>0xa001b8
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>0x000000000030d178:<span class="w"> </span>read_word_at_a_time<span class="w"> </span>at<span class="w"> </span>compiler.h:350
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="w"> </span><span class="o">(</span>inlined<span class="w"> </span>by<span class="o">)</span><span class="w"> </span>dentry_string_cmp<span class="w"> </span>at<span class="w"> </span>dcache.c:252
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="w"> </span><span class="o">(</span>inlined<span class="w"> </span>by<span class="o">)</span><span class="w"> </span>dentry_cmp<span class="w"> </span>at<span class="w"> </span>dcache.c:406
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="w"> </span><span class="o">(</span>inlined<span class="w"> </span>by<span class="o">)</span><span class="w"> </span>__d_lookup_rcu<span class="w"> </span>at<span class="w"> </span>dcache.c:2672
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>0x00000000002fb393:<span class="w"> </span>lookup_fast<span class="w"> </span>at<span class="w"> </span>namei.c:1659
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>...
</code></pre></div></p>
<h3 id="early-return-patter">Early return patter<a class="headerlink" href="#early-return-patter" title="Permanent link">&para;</a></h3>
<h3 id="total-functions-vs-partial-functions">Total functions vs Partial functions<a class="headerlink" href="#total-functions-vs-partial-functions" title="Permanent link">&para;</a></h3>
<p>Let’s say instead of having a precondition that the range is non-empty, I want to handle that case too.
I want to write a total function instead of a partial function. The best way to do that is either return
some value (if I can) or no value (if I can’t). That’s an optional, that’s what it’s for: to handle returning
something or nothing.</p>
<h3 id="simd-in-c20">SIMD in C++20<a class="headerlink" href="#simd-in-c20" title="Permanent link">&para;</a></h3>
<p><a href="https://www.youtube.com/watch?v=WZGNCPBMInI&amp;ab_channel=CppCon">Standard library algorithms implementation using SIMD</a>.</p>
<h3 id="generate-tuple-consisting-of-n-types">Generate tuple consisting of N types<a class="headerlink" href="#generate-tuple-consisting-of-n-types" title="Permanent link">&para;</a></h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-2-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-2-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-2-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-2-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-2-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-2-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-2-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-2-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-2-10">10</a></span>
<span class="normal"><a href="#__codelineno-2-11">11</a></span>
<span class="normal"><a href="#__codelineno-2-12">12</a></span>
<span class="normal"><a href="#__codelineno-2-13">13</a></span>
<span class="normal"><a href="#__codelineno-2-14">14</a></span>
<span class="normal"><a href="#__codelineno-2-15">15</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">T</span><span class="p">,</span><span class="w"> </span><span class="kt">size_t</span><span class="w"> </span><span class="n">N</span><span class="o">&gt;</span>
<a id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="k">struct</span><span class="w"> </span><span class="nc">GenerateTNTimes</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-2-3" name="__codelineno-2-3"></a><span class="w">   </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="kt">size_t</span><span class="w"> </span><span class="n">Index</span><span class="o">&gt;</span>
<a id="__codelineno-2-4" name="__codelineno-2-4"></a><span class="w">   </span><span class="k">using</span><span class="w"> </span><span class="n">AlwaysT</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">T</span><span class="p">;</span>
<a id="__codelineno-2-5" name="__codelineno-2-5"></a>
<a id="__codelineno-2-6" name="__codelineno-2-6"></a><span class="w">   </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_index_sequence</span><span class="o">&lt;</span><span class="n">N</span><span class="o">&gt;&gt;</span>
<a id="__codelineno-2-7" name="__codelineno-2-7"></a><span class="w">   </span><span class="k">struct</span><span class="w"> </span><span class="nc">Impl</span><span class="p">;</span>
<a id="__codelineno-2-8" name="__codelineno-2-8"></a>
<a id="__codelineno-2-9" name="__codelineno-2-9"></a><span class="w">   </span><span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="kt">size_t</span><span class="p">...</span><span class="w"> </span><span class="n">Indices</span><span class="o">&gt;</span>
<a id="__codelineno-2-10" name="__codelineno-2-10"></a><span class="w">      </span><span class="k">struct</span><span class="w"> </span><span class="nc">Impl</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">index_sequence</span><span class="o">&lt;</span><span class="n">Indices</span><span class="p">...</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-2-11" name="__codelineno-2-11"></a><span class="w">      </span><span class="k">using</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">tuple</span><span class="o">&lt;</span><span class="n">AlwaysT</span><span class="o">&lt;</span><span class="n">Indices</span><span class="o">&gt;</span><span class="p">...</span><span class="o">&gt;</span><span class="p">;</span>
<a id="__codelineno-2-12" name="__codelineno-2-12"></a><span class="w">   </span><span class="p">};</span>
<a id="__codelineno-2-13" name="__codelineno-2-13"></a>
<a id="__codelineno-2-14" name="__codelineno-2-14"></a><span class="k">using</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">typename</span><span class="w"> </span><span class="nc">Impl</span><span class="o">&lt;&gt;::</span><span class="n">type</span><span class="p">;</span>
<a id="__codelineno-2-15" name="__codelineno-2-15"></a><span class="p">};</span>
</code></pre></div></td></tr></table></div>
<hr />
<h2 id="ranges"><strong>Ranges</strong><a class="headerlink" href="#ranges" title="Permanent link">&para;</a></h2>
<h3 id="projection-the-3rd-argument">Projection &mdash; the 3rd argument<a class="headerlink" href="#projection-the-3rd-argument" title="Permanent link">&para;</a></h3>
<p>Example 1:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-3-1">1</a></span>
<span class="normal"><a href="#__codelineno-3-2">2</a></span>
<span class="normal"><a href="#__codelineno-3-3">3</a></span>
<span class="normal"><a href="#__codelineno-3-4">4</a></span>
<span class="normal"><a href="#__codelineno-3-5">5</a></span>
<span class="normal"><a href="#__codelineno-3-6">6</a></span>
<span class="normal"><a href="#__codelineno-3-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="k">struct</span><span class="w"> </span><span class="nc">Product</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-3-2" name="__codelineno-3-2"></a><span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">name_</span><span class="p">;</span>
<a id="__codelineno-3-3" name="__codelineno-3-3"></a><span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">value_</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mf">0.0</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-3-4" name="__codelineno-3-4"></a><span class="p">};</span>
<a id="__codelineno-3-5" name="__codelineno-3-5"></a><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w">                 </span><span class="n">is_positive</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[](</span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="o">&amp;</span><span class="w"> </span><span class="n">v</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-3-6" name="__codelineno-3-6"></a><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Product</span><span class="o">&gt;</span><span class="w"> </span><span class="n">prods</span><span class="w">       </span><span class="o">=</span><span class="w"> </span><span class="p">{{</span><span class="w"> </span><span class="s">&quot;box&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">10.0</span><span class="w"> </span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="s">&quot;tv&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">100.0</span><span class="p">},</span><span class="w"> </span><span class="p">{</span><span class="s">&quot;none&quot;</span><span class="p">,</span><span class="w"> </span><span class="mf">-1.0</span><span class="p">}};</span>
<a id="__codelineno-3-7" name="__codelineno-3-7"></a><span class="k">auto</span><span class="w"> </span><span class="n">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">ranges</span><span class="o">::</span><span class="n">all_of</span><span class="p">(</span><span class="n">prods</span><span class="p">,</span><span class="w"> </span><span class="n">is_positive</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">Product</span><span class="o">::</span><span class="n">value_</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p>Example 2, case insensitive search</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1">1</a></span>
<span class="normal"><a href="#__codelineno-4-2">2</a></span>
<span class="normal"><a href="#__codelineno-4-3">3</a></span>
<span class="normal"><a href="#__codelineno-4-4">4</a></span>
<span class="normal"><a href="#__codelineno-4-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="n">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">ranges</span><span class="o">::</span><span class="n">search</span><span class="p">(</span><span class="n">testString2</span><span class="p">,</span>
<a id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="w">                          </span><span class="n">needle2</span><span class="p">,</span>
<a id="__codelineno-4-3" name="__codelineno-4-3"></a><span class="w">                          </span><span class="n">std</span><span class="o">::</span><span class="n">ranges</span><span class="o">::</span><span class="n">equal_to</span><span class="p">{},</span>
<a id="__codelineno-4-4" name="__codelineno-4-4"></a><span class="w">                          </span><span class="o">::</span><span class="n">toupper</span><span class="p">,</span>
<a id="__codelineno-4-5" name="__codelineno-4-5"></a><span class="w">                          </span><span class="o">::</span><span class="n">toupper</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<h3 id="views-compositon">Views compositon &mdash; <code>|</code>:<a class="headerlink" href="#views-compositon" title="Permanent link">&para;</a></h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-5-1">1</a></span>
<span class="normal"><a href="#__codelineno-5-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="k">auto</span><span class="w"> </span><span class="n">out</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[](</span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="o">&amp;</span><span class="w"> </span><span class="n">v</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;, &quot;</span><span class="p">;</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-5-2" name="__codelineno-5-2"></a><span class="n">std</span><span class="o">::</span><span class="n">ranges</span><span class="o">::</span><span class="n">for_each</span><span class="p">(</span><span class="n">prods</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">views</span><span class="o">::</span><span class="n">reverse</span><span class="p">,</span><span class="w"> </span><span class="n">out</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">Product</span><span class="o">::</span><span class="n">name_</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<h3 id="temporary-ranges-stdrangesdangling">temporary ranges &amp; <code>std::ranges::dangling</code><a class="headerlink" href="#temporary-ranges-stdrangesdangling" title="Permanent link">&para;</a></h3>
<p>There is a special type that is returned when a function is called with a temporary value:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-1">1</a></span>
<span class="normal"><a href="#__codelineno-6-2">2</a></span>
<span class="normal"><a href="#__codelineno-6-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Product</span><span class="o">&gt;</span><span class="w"> </span><span class="n">GetProds</span><span class="p">()</span><span class="w"> </span><span class="p">{...}</span>
<a id="__codelineno-6-2" name="__codelineno-6-2"></a>
<a id="__codelineno-6-3" name="__codelineno-6-3"></a><span class="k">auto</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">ranges</span><span class="o">::</span><span class="n">find_if</span><span class="p">(</span><span class="n">GetProds</span><span class="p">(),</span><span class="w"> </span><span class="p">[](</span><span class="k">const</span><span class="w"> </span><span class="n">Product</span><span class="o">&amp;</span><span class="w"> </span><span class="n">p</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nb">true</span><span class="p">});</span>
</code></pre></div></td></tr></table></div>
<p>will <a href="https://godbolt.org/z/f5v1P4rGo">result in</a>:
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>&lt;source&gt;:22:48: error: base operand of &#39;-&gt;&#39; has non-pointer type &#39;std::ranges::dangling&#39;
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>   22 |     std::cout &lt;&lt; &quot;std::ranges::find_if: &quot; &lt;&lt; it-&gt;name_ &lt;&lt; &#39;\n&#39;;
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>      |   
</code></pre></div></p>
<h3 id="eraseremove-idiom"><a href="https://en.wikipedia.org/wiki/Erase%E2%80%93remove_idiom">Erase–remove idiom</a><a class="headerlink" href="#eraseremove-idiom" title="Permanent link">&para;</a></h3>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-8-1">1</a></span>
<span class="normal"><a href="#__codelineno-8-2">2</a></span>
<span class="normal"><a href="#__codelineno-8-3">3</a></span>
<span class="normal"><a href="#__codelineno-8-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="n">prodsVec</span><span class="p">.</span><span class="n">erase</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">ranges</span><span class="o">::</span><span class="n">remove_if</span><span class="p">(</span><span class="n">prodsVec</span><span class="p">,</span><span class="w"> </span><span class="n">checkNoPrefix</span><span class="p">).</span><span class="n">begin</span><span class="p">(),</span><span class="w"> </span><span class="n">prodsVec</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>
<a id="__codelineno-8-2" name="__codelineno-8-2"></a>
<a id="__codelineno-8-3" name="__codelineno-8-3"></a><span class="c1">// or</span>
<a id="__codelineno-8-4" name="__codelineno-8-4"></a><span class="n">std</span><span class="o">::</span><span class="n">erase_if</span><span class="p">(</span><span class="n">prodsVec</span><span class="p">,</span><span class="w"> </span><span class="n">checkNoPrefix</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<hr />
<h2 id="concepts"><strong>Concepts</strong><a class="headerlink" href="#concepts" title="Permanent link">&para;</a></h2>
<p>Purpose:</p>
<ul>
<li>Better error messages.</li>
<li>Faster compilation <span class="critic comment">checks can be performed before instantiating and parsing a template function/class</span>.</li>
<li>Glorified <code>std::enable_if_t</code>.</li>
</ul>
<h3 id="constraining-return-type">Constraining return type<a class="headerlink" href="#constraining-return-type" title="Permanent link">&para;</a></h3>
<p>Use arrow: <code>-&gt;</code>:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="k">template</span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span>
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="k">concept</span><span class="w"> </span><span class="nc">BoolComparable</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">requires</span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">lhs</span><span class="p">,</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="n">rhs</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="w">   </span><span class="p">{</span><span class="n">lhs</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">rhs</span><span class="p">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">convertible_to</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span><span class="p">;</span>
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="w">   </span><span class="p">{</span><span class="w"> </span><span class="n">shape</span><span class="p">.</span><span class="n">draw</span><span class="p">()</span><span class="w"> </span><span class="p">};</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">same_as</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">&gt;</span><span class="p">;</span>
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a><span class="p">};</span>
</code></pre></div>
<h3 id="constraints-for-multiple-types">Constraints for multiple types<a class="headerlink" href="#constraints-for-multiple-types" title="Permanent link">&para;</a></h3>
<p>Consider heterogeneous comparison (<code>"asdf" == std::string("asdf")</code>):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="k">template</span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">T</span><span class="p">,</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">U</span><span class="o">&gt;</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="k">concept</span><span class="w"> </span><span class="nc">EqualityCompare</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">requires</span><span class="p">(</span><span class="n">T</span><span class="w"> </span><span class="n">op_T</span><span class="p">,</span><span class="w"> </span><span class="n">U</span><span class="w"> </span><span class="n">op_U</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="w">   </span><span class="p">{</span><span class="n">op_T</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">op_U</span><span class="p">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">convertible_to</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span><span class="p">;</span>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="w">   </span><span class="p">{</span><span class="n">op_U</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">op_T</span><span class="p">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">convertible_to</span><span class="o">&lt;</span><span class="kt">bool</span><span class="o">&gt;</span><span class="p">;</span>
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="p">};</span>
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>
<a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="k">template</span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">T</span><span class="p">,</span><span class="w"> </span><span class="n">EqualityCompare</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">U</span><span class="o">&gt;</span>
<a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a><span class="kt">bool</span><span class="w"> </span><span class="n">are_equal</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="n">op_T</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">U</span><span class="w"> </span><span class="n">op_U</span><span class="p">)</span><span class="w"> </span><span class="p">{...}</span>
<a id="__codelineno-10-9" name="__codelineno-10-9" href="#__codelineno-10-9"></a>
<a id="__codelineno-10-10" name="__codelineno-10-10" href="#__codelineno-10-10"></a><span class="k">template</span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">T</span><span class="p">,</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">U</span><span class="o">&gt;</span><span class="w"> </span><span class="k">requires</span><span class="w"> </span><span class="n">EqualityCompare</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">U</span><span class="o">&gt;</span>
<a id="__codelineno-10-11" name="__codelineno-10-11" href="#__codelineno-10-11"></a><span class="kt">bool</span><span class="w"> </span><span class="n">are_equal</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="n">op_T</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w">  </span><span class="n">U</span><span class="w"> </span><span class="n">op_U</span><span class="p">)</span><span class="w"> </span><span class="p">{...}</span>
<a id="__codelineno-10-12" name="__codelineno-10-12" href="#__codelineno-10-12"></a>
<a id="__codelineno-10-13" name="__codelineno-10-13" href="#__codelineno-10-13"></a><span class="kt">bool</span><span class="w"> </span><span class="n">are_equal</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">op_T</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">op_U</span><span class="p">)</span>
<a id="__codelineno-10-14" name="__codelineno-10-14" href="#__codelineno-10-14"></a><span class="k">requires</span><span class="w"> </span><span class="n">EqualityCompare</span><span class="o">&lt;</span><span class="n">declytpe</span><span class="p">(</span><span class="n">op_T</span><span class="p">),</span><span class="w"> </span><span class="k">decltype</span><span class="p">(</span><span class="n">op_U</span><span class="p">)</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{...}</span>
</code></pre></div>
<h3 id="using-concepts-as-parameters">Using concepts as parameters<a class="headerlink" href="#using-concepts-as-parameters" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="kt">void</span><span class="w"> </span><span class="nf">drawShape</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">ShapeConcept</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="o">&amp;</span><span class="n">shape</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="w">   </span><span class="n">shape</span><span class="p">.</span><span class="n">draw</span><span class="p">();</span>
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="p">}</span>
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="k">template</span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">ShapeConcept</span><span class="o">&gt;</span>
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="kt">void</span><span class="w"> </span><span class="n">drawShape</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">ShapeConcept</span><span class="w"> </span><span class="o">&amp;</span><span class="n">shape</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-11-6" name="__codelineno-11-6" href="#__codelineno-11-6"></a><span class="w">   </span><span class="n">shape</span><span class="p">.</span><span class="n">draw</span><span class="p">();</span>
<a id="__codelineno-11-7" name="__codelineno-11-7" href="#__codelineno-11-7"></a><span class="p">}</span>
</code></pre></div>
<h3 id="using-concepts-as-return-types">Using concepts as return types<a class="headerlink" href="#using-concepts-as-return-types" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="n">ShapeConcept</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">getShape</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="w">   </span><span class="p">...</span>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="p">}</span>
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="k">auto</span><span class="w"> </span><span class="n">getShape</span><span class="p">()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">ShapeConcept</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="w">   </span><span class="p">...</span>
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a><span class="p">}</span>
</code></pre></div>
<hr />
<h2 id="reference-collapsing-rules"><strong>Reference collapsing rules</strong><a class="headerlink" href="#reference-collapsing-rules" title="Permanent link">&para;</a></h2>
<p>A good explanation of <a href="http://thbecker.net/articles/rvalue_references/section_01.html">rvalues</a>.</p>
<p>Geven:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-13-1">1</a></span>
<span class="normal"><a href="#__codelineno-13-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span><span class="w"> </span>
<a id="__codelineno-13-2" name="__codelineno-13-2"></a><span class="kt">void</span><span class="w"> </span><span class="n">foo</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;&amp;</span><span class="p">);</span>
</code></pre></div></td></tr></table></div>
<p>There is a special template argument deduction rule for function templates that take an argument by
rvalue reference to a template argument:</p>
<ul>
<li>When <code>foo()</code> is called on an <strong>lvalue of type <code>A</code></strong>, then <strong><code>T</code> resolves to <code>A&amp;</code></strong> and hence, by
  the reference collapsing rules above, the argument type effectively becomes <code>A&amp;</code>.</li>
<li>When <code>foo()</code> is called on an <strong>rvalue of type <code>A</code></strong>, then <strong><code>T</code> resolves to <code>A</code></strong>, and hence
  the argument type becomes <code>A&amp;&amp;</code>.</li>
</ul>
<hr />
<h2 id="auto-vs-decltype"><strong>auto vs decltype</strong><a class="headerlink" href="#auto-vs-decltype" title="Permanent link">&para;</a></h2>
<p><a href="http://thbecker.net/articles/auto_and_decltype/section_01.html">Src</a>.</p>
<p><code>rvalue</code> is an <code>xvalue</code> if it is one of the following:</p>
<ul>
<li>A function call where the function&rsquo;s return value is declared as an <code>rvalue</code> reference.
  An example would be <code>std::move(x)</code>.</li>
<li>A cast to an <code>rvalue</code> reference. An example would be <code>static_cast&lt;A&amp;&amp;&gt;(a)</code>.</li>
<li>A member access of an <code>xvalue</code>. Example: <code>(static_cast&lt;A&amp;&amp;&gt;(a)).m_x</code>.</li>
</ul>
<p>All other <code>rvalues</code> are <code>prvalues</code>. We are now in a position to describe how <code>decltype</code> deduces
the type of a complex expression.</p>
<p>Let <code>expr</code> be an expression that is not a plain, unparenthesized variable, function parameter, or
class member access. Let <code>T</code> be the type of <code>expr</code>.</p>
<ul>
<li>If <code>expr</code> is an <code>lvalue</code>, then <code>decltype(expr)</code> is <code>T&amp;</code>.</li>
<li>If <code>expr</code> is an <code>xvalue</code>, then <code>decltype(expr)</code> is <code>T&amp;&amp;</code>.</li>
<li>Otherwise, <code>expr</code> is a <code>prvalue</code>, and <code>decltype(expr)</code> is <code>T</code>.</li>
</ul>
<hr />
<h2 id="rvo-urvo-nrvo"><strong>RVO / URVO / NRVO</strong><a class="headerlink" href="#rvo-urvo-nrvo" title="Permanent link">&para;</a></h2>
<p>Consider the following:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-14-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-14-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-14-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-14-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-14-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-14-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-14-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-14-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-14-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-14-10">10</a></span>
<span class="normal"><a href="#__codelineno-14-11">11</a></span>
<span class="normal"><a href="#__codelineno-14-12">12</a></span>
<span class="normal"><a href="#__codelineno-14-13">13</a></span>
<span class="normal"><a href="#__codelineno-14-14">14</a></span>
<span class="normal"><a href="#__codelineno-14-15">15</a></span>
<span class="normal"><a href="#__codelineno-14-16">16</a></span>
<span class="normal"><a href="#__codelineno-14-17">17</a></span>
<span class="normal"><a href="#__codelineno-14-18">18</a></span>
<span class="normal"><a href="#__codelineno-14-19">19</a></span>
<span class="normal"><a href="#__codelineno-14-20">20</a></span>
<span class="normal"><a href="#__codelineno-14-21">21</a></span>
<span class="normal"><a href="#__codelineno-14-22">22</a></span>
<span class="normal"><a href="#__codelineno-14-23">23</a></span>
<span class="normal"><a href="#__codelineno-14-24">24</a></span>
<span class="normal"><a href="#__codelineno-14-25">25</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">TString</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-14-2" name="__codelineno-14-2"></a><span class="w">  </span><span class="k">public</span><span class="o">:</span>
<a id="__codelineno-14-3" name="__codelineno-14-3"></a><span class="w">    </span><span class="n">TString</span><span class="p">()</span><span class="w">                           </span><span class="p">{</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;ctor()&quot;</span><span class="w">       </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-14-4" name="__codelineno-14-4"></a><span class="w">    </span><span class="n">TString</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="w">               </span><span class="p">{</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;ctor(char *)&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-14-5" name="__codelineno-14-5"></a><span class="w">    </span><span class="n">TString</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">TString</span><span class="w"> </span><span class="o">&amp;</span><span class="p">)</span><span class="w">            </span><span class="p">{</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;ctor const &amp;&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-14-6" name="__codelineno-14-6"></a><span class="w">    </span><span class="n">TString</span><span class="w"> </span><span class="o">&amp;</span><span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">TString</span><span class="w"> </span><span class="o">&amp;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;= const &amp;&quot;</span><span class="w">    </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="o">*</span><span class="k">this</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-14-7" name="__codelineno-14-7"></a><span class="w">    </span><span class="n">TString</span><span class="p">(</span><span class="n">TString</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="p">)</span><span class="w">                 </span><span class="p">{</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;ctor &amp;&amp;&quot;</span><span class="w">      </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-14-8" name="__codelineno-14-8"></a><span class="w">    </span><span class="n">TString</span><span class="w"> </span><span class="o">&amp;</span><span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="n">TString</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="p">)</span><span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;= &amp;&amp;&amp;&quot;</span><span class="w">        </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="o">*</span><span class="k">this</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-14-9" name="__codelineno-14-9"></a><span class="p">};</span>
<a id="__codelineno-14-10" name="__codelineno-14-10"></a>
<a id="__codelineno-14-11" name="__codelineno-14-11"></a><span class="n">TString</span><span class="w"> </span><span class="nf">Meow</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-14-12" name="__codelineno-14-12"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;Meow&quot;</span><span class="p">;</span>
<a id="__codelineno-14-13" name="__codelineno-14-13"></a>
<a id="__codelineno-14-14" name="__codelineno-14-14"></a><span class="w">  </span><span class="c1">// ------ or ------</span>
<a id="__codelineno-14-15" name="__codelineno-14-15"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">TString</span><span class="p">(</span><span class="s">&quot;Meow&quot;</span><span class="p">);</span>
<a id="__codelineno-14-16" name="__codelineno-14-16"></a>
<a id="__codelineno-14-17" name="__codelineno-14-17"></a><span class="w">  </span><span class="c1">// ------ or ------</span>
<a id="__codelineno-14-18" name="__codelineno-14-18"></a><span class="w">  </span><span class="n">TString</span><span class="w"> </span><span class="n">a</span><span class="p">(</span><span class="s">&quot;Meow&quot;</span><span class="p">);</span>
<a id="__codelineno-14-19" name="__codelineno-14-19"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">a</span><span class="p">;</span>
<a id="__codelineno-14-20" name="__codelineno-14-20"></a><span class="p">}</span>
<a id="__codelineno-14-21" name="__codelineno-14-21"></a>
<a id="__codelineno-14-22" name="__codelineno-14-22"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-14-23" name="__codelineno-14-23"></a><span class="w">  </span><span class="n">TString</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Meow</span><span class="p">();</span>
<a id="__codelineno-14-24" name="__codelineno-14-24"></a><span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-14-25" name="__codelineno-14-25"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>The output is just
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>ctor(char *)
</code></pre></div></p>
<p>As you can see there is no things like: (1) construct temporary string in the function <code>Meow</code>,
(2) construct string <code>s</code> in <code>main</code>, (3) call <code>s.operator=</code>, (4) destruct temporary string (constructed in <code>Meow</code>).</p>
<p>Instead of it just a single ctor called.</p>
<hr />
<h2 id="lesser-known-c-std-algorithms"><strong>Lesser known C++ std algorithms</strong><a class="headerlink" href="#lesser-known-c-std-algorithms" title="Permanent link">&para;</a></h2>
<p><a href="https://en.cppreference.com/w/cpp/algorithm">Full list</a>.</p>
<h3 id="uncategorised">Uncategorised<a class="headerlink" href="#uncategorised" title="Permanent link">&para;</a></h3>
<ul>
<li><a href="https://en.cppreference.com/w/cpp/numeric/valarray/slice"><code>slice</code></a>, <a href="https://en.cppreference.com/w/cpp/numeric/valarray"><code>valarray</code></a></li>
</ul>
<h3 id="non-modifying-sequence-operations">Non-modifying sequence operations<a class="headerlink" href="#non-modifying-sequence-operations" title="Permanent link">&para;</a></h3>
<ul>
<li><a href="https://en.cppreference.com/w/cpp/algorithm/all_any_none_of"><code>all_of</code>, <code>any_of</code>, <code>none_of</code></a></li>
<li><a href="https://en.cppreference.com/w/cpp/algorithm/count"><code>count_if</code></a></li>
<li><a href="https://en.cppreference.com/w/cpp/algorithm/adjacent_find"><code>adjacent_find</code></a></li>
</ul>
<h3 id="modifying-sequence-operations">Modifying sequence operations<a class="headerlink" href="#modifying-sequence-operations" title="Permanent link">&para;</a></h3>
<ul>
<li><a href="https://en.cppreference.com/w/cpp/algorithm/remove"><code>remove_if</code></a>, <a href="https://en.cppreference.com/w/cpp/algorithm/replace"><code>replace_if</code></a></li>
<li><a href="https://en.cppreference.com/w/cpp/algorithm/swap_ranges"><code>swap_ranges</code></a></li>
</ul>
<h3 id="sort-related">Sort related<a class="headerlink" href="#sort-related" title="Permanent link">&para;</a></h3>
<ul>
<li><a href="https://en.cppreference.com/w/cpp/algorithm/merge"><code>merge</code></a>, <a href="https://en.cppreference.com/w/cpp/algorithm/inplace_merge"><code>inplace_merge</code></a></li>
<li><a href="https://en.cppreference.com/w/cpp/algorithm/partial_sort"><code>partial_sort</code></a></li>
<li><a href="https://en.cppreference.com/w/cpp/algorithm/nth_element"><code>nth_element</code></a></li>
<li><a href="https://en.cppreference.com/w/cpp/algorithm/partition"><code>partition</code></a>, <a href="https://en.cppreference.com/w/cpp/algorithm/stable_partition"><code>stable_partition</code></a></li>
<li><a href="https://en.cppreference.com/w/cpp/algorithm/is_partitioned"><code>is_partitioned</code></a>, <a href="https://en.cppreference.com/w/cpp/algorithm/partition_point"><code>partition_point</code></a></li>
</ul>
<h3 id="minimummaximum">Minimum/maximum<a class="headerlink" href="#minimummaximum" title="Permanent link">&para;</a></h3>
<ul>
<li><a href="https://en.cppreference.com/w/cpp/algorithm/minmax"><code>minmax</code></a>, <a href="https://en.cppreference.com/w/cpp/algorithm/minmax_element"><code>minmax_element</code></a></li>
</ul>
<hr />
<h2 id="c-core-guidelines-excerpts"><a href="https://github.com/isocpp/CppCoreGuidelines/blob/master/CppCoreGuidelines.md"><strong>C++ Core Guidelines</strong></a> <span class="critic comment">excerpts</span><a class="headerlink" href="#c-core-guidelines-excerpts" title="Permanent link">&para;</a></h2>
<h3 id="c138-create-an-overload-set-for-a-derived-class-and-its-bases-with-using">C.138: Create an overload set for a derived class and its bases with <code>using</code><a class="headerlink" href="#c138-create-an-overload-set-for-a-derived-class-and-its-bases-with-using" title="Permanent link">&para;</a></h3>
<h5 id="reason">Reason<a class="headerlink" href="#reason" title="Permanent link">&para;</a></h5>
<p>Without a <code>using</code> declaration, member functions in the derived class hide the entire inherited overload sets.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Example, bad</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-16-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-16-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-16-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-16-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-16-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-16-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-16-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-16-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-16-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-16-10">10</a></span>
<span class="normal"><a href="#__codelineno-16-11">11</a></span>
<span class="normal"><a href="#__codelineno-16-12">12</a></span>
<span class="normal"><a href="#__codelineno-16-13">13</a></span>
<span class="normal"><a href="#__codelineno-16-14">14</a></span>
<span class="normal"><a href="#__codelineno-16-15">15</a></span>
<span class="normal"><a href="#__codelineno-16-16">16</a></span>
<span class="normal"><a href="#__codelineno-16-17">17</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span>
<a id="__codelineno-16-2" name="__codelineno-16-2"></a><span class="k">class</span><span class="w"> </span><span class="nc">B</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-16-3" name="__codelineno-16-3"></a><span class="k">public</span><span class="o">:</span>
<a id="__codelineno-16-4" name="__codelineno-16-4"></a><span class="w">    </span><span class="k">virtual</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">f</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;f(int): &quot;</span><span class="p">;</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">i</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-16-5" name="__codelineno-16-5"></a><span class="w">    </span><span class="k">virtual</span><span class="w"> </span><span class="kt">double</span><span class="w"> </span><span class="n">f</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">d</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;f(double): &quot;</span><span class="p">;</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">d</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-16-6" name="__codelineno-16-6"></a><span class="w">    </span><span class="k">virtual</span><span class="w"> </span><span class="o">~</span><span class="n">B</span><span class="p">()</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">default</span><span class="p">;</span>
<a id="__codelineno-16-7" name="__codelineno-16-7"></a><span class="p">};</span>
<a id="__codelineno-16-8" name="__codelineno-16-8"></a><span class="k">class</span><span class="w"> </span><span class="nc">D</span><span class="o">:</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-16-9" name="__codelineno-16-9"></a><span class="k">public</span><span class="o">:</span>
<a id="__codelineno-16-10" name="__codelineno-16-10"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">f</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="k">override</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;f(int): &quot;</span><span class="p">;</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-16-11" name="__codelineno-16-11"></a><span class="p">};</span>
<a id="__codelineno-16-12" name="__codelineno-16-12"></a><span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span>
<a id="__codelineno-16-13" name="__codelineno-16-13"></a><span class="p">{</span>
<a id="__codelineno-16-14" name="__codelineno-16-14"></a><span class="w">    </span><span class="n">D</span><span class="w"> </span><span class="n">d</span><span class="p">;</span>
<a id="__codelineno-16-15" name="__codelineno-16-15"></a><span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">f</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="sc">&#39;\n&#39;</span><span class="p">;</span><span class="w">   </span><span class="c1">// prints &quot;f(int): 3&quot;</span>
<a id="__codelineno-16-16" name="__codelineno-16-16"></a><span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">d</span><span class="p">.</span><span class="n">f</span><span class="p">(</span><span class="mf">2.3</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="sc">&#39;\n&#39;</span><span class="p">;</span><span class="w"> </span><span class="c1">// prints &quot;f(int): 3&quot;</span>
<a id="__codelineno-16-17" name="__codelineno-16-17"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Example, good</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-17-1">1</a></span>
<span class="normal"><a href="#__codelineno-17-2">2</a></span>
<span class="normal"><a href="#__codelineno-17-3">3</a></span>
<span class="normal"><a href="#__codelineno-17-4">4</a></span>
<span class="normal"><a href="#__codelineno-17-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">D</span><span class="o">:</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">B</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-2" name="__codelineno-17-2"></a><span class="k">public</span><span class="o">:</span>
<a id="__codelineno-17-3" name="__codelineno-17-3"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">f</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="k">override</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;f(int): &quot;</span><span class="p">;</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-17-4" name="__codelineno-17-4"></a><span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="n">B</span><span class="o">::</span><span class="n">f</span><span class="p">;</span><span class="w"> </span><span class="c1">// exposes f(double)</span>
<a id="__codelineno-17-5" name="__codelineno-17-5"></a><span class="p">};</span>
</code></pre></div></td></tr></table></div>
<h5 id="note">Note<a class="headerlink" href="#note" title="Permanent link">&para;</a></h5>
<p>This issue affects both virtual and non-virtual member functions</p>
<p>For variadic bases, C++17 introduced a variadic form of the using-declaration,</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-18-1">1</a></span>
<span class="normal"><a href="#__codelineno-18-2">2</a></span>
<span class="normal"><a href="#__codelineno-18-3">3</a></span>
<span class="normal"><a href="#__codelineno-18-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1"></a><span class="k">template</span><span class="o">&lt;</span><span class="k">class</span><span class="p">...</span><span class="w"> </span><span class="n">Ts</span><span class="o">&gt;</span>
<a id="__codelineno-18-2" name="__codelineno-18-2"></a><span class="k">struct</span><span class="w"> </span><span class="nc">Overloader</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Ts</span><span class="p">...</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-18-3" name="__codelineno-18-3"></a><span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="n">Ts</span><span class="o">::</span><span class="k">operator</span><span class="p">()...;</span><span class="w"> </span><span class="c1">// exposes operator() from every base</span>
<a id="__codelineno-18-4" name="__codelineno-18-4"></a><span class="p">};</span>
</code></pre></div></td></tr></table></div>
<h3 id="c165-use-using-for-customization-points">C.165: Use <code>using</code> for customization points<a class="headerlink" href="#c165-use-using-for-customization-points" title="Permanent link">&para;</a></h3>
<h5 id="reason_1">Reason<a class="headerlink" href="#reason_1" title="Permanent link">&para;</a></h5>
<p>To find function objects and functions defined in a separate namespace to &ldquo;customize&rdquo; a common function.</p>
<h5 id="example">Example<a class="headerlink" href="#example" title="Permanent link">&para;</a></h5>
<p>Consider <code>swap</code>. It is a general (standard-library) function with a definition that will work for just about
any type. However, it is desirable to define specific <code>swap()</code>&rsquo;s for specific types. For example, the general
<code>swap()</code> will copy the elements of two vectors being swapped, whereas a good specific implementation will not
copy elements at all.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">bad</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-19-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-19-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-19-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-19-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-19-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-19-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-19-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-19-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-19-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-19-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1"></a><span class="k">namespace</span><span class="w"> </span><span class="nn">N</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-19-2" name="__codelineno-19-2"></a><span class="w">    </span><span class="n">My_type</span><span class="w"> </span><span class="n">X</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="cm">/* ... */</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-19-3" name="__codelineno-19-3"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">swap</span><span class="p">(</span><span class="n">X</span><span class="o">&amp;</span><span class="p">,</span><span class="w"> </span><span class="n">X</span><span class="o">&amp;</span><span class="p">);</span><span class="w">   </span><span class="c1">// optimized swap for N::X</span>
<a id="__codelineno-19-4" name="__codelineno-19-4"></a><span class="w">    </span><span class="c1">// ...</span>
<a id="__codelineno-19-5" name="__codelineno-19-5"></a><span class="p">}</span>
<a id="__codelineno-19-6" name="__codelineno-19-6"></a>
<a id="__codelineno-19-7" name="__codelineno-19-7"></a><span class="kt">void</span><span class="w"> </span><span class="n">f1</span><span class="p">(</span><span class="n">N</span><span class="o">::</span><span class="n">X</span><span class="o">&amp;</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">N</span><span class="o">::</span><span class="n">X</span><span class="o">&amp;</span><span class="w"> </span><span class="n">b</span><span class="p">)</span>
<a id="__codelineno-19-8" name="__codelineno-19-8"></a><span class="p">{</span>
<a id="__codelineno-19-9" name="__codelineno-19-9"></a><span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">swap</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">);</span><span class="w">   </span><span class="c1">// probably not what we wanted: calls std::swap()</span>
<a id="__codelineno-19-10" name="__codelineno-19-10"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>The <code>std::swap()</code> in <code>f1()</code> does exactly what we asked it to do: it calls the <code>swap()</code> in namespace <code>std</code>.
Unfortunately, that&rsquo;s probably not what we wanted. How do we get <code>N::X</code> considered?</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">better</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-20-1">1</a></span>
<span class="normal"><a href="#__codelineno-20-2">2</a></span>
<span class="normal"><a href="#__codelineno-20-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1"></a><span class="kt">void</span><span class="w"> </span><span class="nf">f2</span><span class="p">(</span><span class="n">N</span><span class="o">::</span><span class="n">X</span><span class="o">&amp;</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">N</span><span class="o">::</span><span class="n">X</span><span class="o">&amp;</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-20-2" name="__codelineno-20-2"></a><span class="w">    </span><span class="n">swap</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">);</span><span class="w">   </span><span class="c1">// calls N::swap</span>
<a id="__codelineno-20-3" name="__codelineno-20-3"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>But that might not be what we wanted for generic code. There, we typically want the specific function if it exists
and the general function if not. This is done by including the general function in the lookup for the function:</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">good</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-21-1">1</a></span>
<span class="normal"><a href="#__codelineno-21-2">2</a></span>
<span class="normal"><a href="#__codelineno-21-3">3</a></span>
<span class="normal"><a href="#__codelineno-21-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1"></a><span class="kt">void</span><span class="w"> </span><span class="nf">f3</span><span class="p">(</span><span class="n">N</span><span class="o">::</span><span class="n">X</span><span class="o">&amp;</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">N</span><span class="o">::</span><span class="n">X</span><span class="o">&amp;</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-21-2" name="__codelineno-21-2"></a><span class="w">    </span><span class="k">using</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">swap</span><span class="p">;</span><span class="w">  </span><span class="c1">// make std::swap available</span>
<a id="__codelineno-21-3" name="__codelineno-21-3"></a><span class="w">    </span><span class="n">swap</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">);</span><span class="w">       </span><span class="c1">// calls N::swap if it exists, otherwise std::swap</span>
<a id="__codelineno-21-4" name="__codelineno-21-4"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="c129-when-designing-a-class-hierarchy-distinguish-between-implementation-inheritance-and-interface-inheritance">C.129: When designing a class hierarchy, distinguish between implementation inheritance and interface inheritance<a class="headerlink" href="#c129-when-designing-a-class-hierarchy-distinguish-between-implementation-inheritance-and-interface-inheritance" title="Permanent link">&para;</a></h3>
<h5 id="reason_2">Reason<a class="headerlink" href="#reason_2" title="Permanent link">&para;</a></h5>
<p>Implementation details in an interface make the interface brittle; that is, make its users vulnerable to having
to recompile after changes in the implementation. Data in a base class increases the complexity of implementing
the base and can lead to replication of code.</p>
<h5 id="note_1">Note<a class="headerlink" href="#note_1" title="Permanent link">&para;</a></h5>
<dl>
<dt><code>Interface inheritance</code>:</dt>
<dd>
<p>is the use of inheritance to separate users from implementations, in particular to allow derived classes to
be added and changed without affecting the users of base classes.</p>
</dd>
<dt><code>Implementation inheritance</code>:</dt>
<dd>is the use of inheritance to simplify implementation of new facilities by making useful operations available
for implementers of related new operations (sometimes called &ldquo;programming by difference&rdquo;).</dd>
</dl>
<p>A pure interface class is simply a set of pure virtual functions; see I.25.</p>
<p>In early OOP (e.g., in the 1980s and 1990s), implementation inheritance and interface inheritance were often mixed
and bad habits die hard. Even now, mixtures are not uncommon in old code bases and in old-style teaching material.</p>
<p>The importance of keeping the two kinds of inheritance increases</p>
<ul>
<li>with the size of a hierarchy (e.g., dozens of derived classes),</li>
<li>with the length of time the hierarchy is used (e.g., decades), and</li>
<li>with the number of distinct organizations in which a hierarchy is used (e.g., it can be difficult to distribute an update to a base class)</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Example, bad:</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-22-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-22-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-22-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-22-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-22-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-22-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-22-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-22-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-22-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-22-10">10</a></span>
<span class="normal"><a href="#__codelineno-22-11">11</a></span>
<span class="normal"><a href="#__codelineno-22-12">12</a></span>
<span class="normal"><a href="#__codelineno-22-13">13</a></span>
<span class="normal"><a href="#__codelineno-22-14">14</a></span>
<span class="normal"><a href="#__codelineno-22-15">15</a></span>
<span class="normal"><a href="#__codelineno-22-16">16</a></span>
<span class="normal"><a href="#__codelineno-22-17">17</a></span>
<span class="normal"><a href="#__codelineno-22-18">18</a></span>
<span class="normal"><a href="#__codelineno-22-19">19</a></span>
<span class="normal"><a href="#__codelineno-22-20">20</a></span>
<span class="normal"><a href="#__codelineno-22-21">21</a></span>
<span class="normal"><a href="#__codelineno-22-22">22</a></span>
<span class="normal"><a href="#__codelineno-22-23">23</a></span>
<span class="normal"><a href="#__codelineno-22-24">24</a></span>
<span class="normal"><a href="#__codelineno-22-25">25</a></span>
<span class="normal"><a href="#__codelineno-22-26">26</a></span>
<span class="normal"><a href="#__codelineno-22-27">27</a></span>
<span class="normal"><a href="#__codelineno-22-28">28</a></span>
<span class="normal"><a href="#__codelineno-22-29">29</a></span>
<span class="normal"><a href="#__codelineno-22-30">30</a></span>
<span class="normal"><a href="#__codelineno-22-31">31</a></span>
<span class="normal"><a href="#__codelineno-22-32">32</a></span>
<span class="normal"><a href="#__codelineno-22-33">33</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">Shape</span><span class="w"> </span><span class="p">{</span><span class="w">   </span><span class="c1">// BAD, mixed interface and implementation</span>
<a id="__codelineno-22-2" name="__codelineno-22-2"></a><span class="k">public</span><span class="o">:</span>
<a id="__codelineno-22-3" name="__codelineno-22-3"></a><span class="w">    </span><span class="n">Shape</span><span class="p">();</span>
<a id="__codelineno-22-4" name="__codelineno-22-4"></a><span class="w">    </span><span class="n">Shape</span><span class="p">(</span><span class="n">Point</span><span class="w"> </span><span class="n">ce</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">},</span><span class="w"> </span><span class="n">Color</span><span class="w"> </span><span class="n">co</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">none</span><span class="p">)</span><span class="o">:</span><span class="w"> </span><span class="n">cent</span><span class="p">{</span><span class="n">ce</span><span class="p">},</span><span class="w"> </span><span class="n">col</span><span class="w"> </span><span class="p">{</span><span class="n">co</span><span class="p">}</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="cm">/* ... */</span><span class="p">}</span>
<a id="__codelineno-22-5" name="__codelineno-22-5"></a>
<a id="__codelineno-22-6" name="__codelineno-22-6"></a><span class="w">    </span><span class="n">Point</span><span class="w"> </span><span class="n">center</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">cent</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-22-7" name="__codelineno-22-7"></a><span class="w">    </span><span class="n">Color</span><span class="w"> </span><span class="n">color</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">col</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-22-8" name="__codelineno-22-8"></a>
<a id="__codelineno-22-9" name="__codelineno-22-9"></a><span class="w">    </span><span class="k">virtual</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="n">rotate</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-22-10" name="__codelineno-22-10"></a><span class="w">    </span><span class="k">virtual</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">move</span><span class="p">(</span><span class="n">Point</span><span class="w"> </span><span class="n">p</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">cent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p</span><span class="p">;</span><span class="w"> </span><span class="n">redraw</span><span class="p">();</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-22-11" name="__codelineno-22-11"></a>
<a id="__codelineno-22-12" name="__codelineno-22-12"></a><span class="w">    </span><span class="k">virtual</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">redraw</span><span class="p">();</span>
<a id="__codelineno-22-13" name="__codelineno-22-13"></a>
<a id="__codelineno-22-14" name="__codelineno-22-14"></a><span class="w">    </span><span class="c1">// ...</span>
<a id="__codelineno-22-15" name="__codelineno-22-15"></a><span class="k">private</span><span class="o">:</span>
<a id="__codelineno-22-16" name="__codelineno-22-16"></a><span class="w">    </span><span class="n">Point</span><span class="w"> </span><span class="n">cent</span><span class="p">;</span>
<a id="__codelineno-22-17" name="__codelineno-22-17"></a><span class="w">    </span><span class="n">Color</span><span class="w"> </span><span class="n">col</span><span class="p">;</span>
<a id="__codelineno-22-18" name="__codelineno-22-18"></a><span class="p">};</span>
<a id="__codelineno-22-19" name="__codelineno-22-19"></a>
<a id="__codelineno-22-20" name="__codelineno-22-20"></a><span class="k">class</span><span class="w"> </span><span class="nc">Circle</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">Shape</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-22-21" name="__codelineno-22-21"></a><span class="k">public</span><span class="o">:</span>
<a id="__codelineno-22-22" name="__codelineno-22-22"></a><span class="w">    </span><span class="n">Circle</span><span class="p">(</span><span class="n">Point</span><span class="w"> </span><span class="n">c</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">r</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Shape</span><span class="p">{</span><span class="n">c</span><span class="p">},</span><span class="w"> </span><span class="n">rad</span><span class="p">{</span><span class="n">r</span><span class="p">}</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="cm">/* ... */</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-22-23" name="__codelineno-22-23"></a>
<a id="__codelineno-22-24" name="__codelineno-22-24"></a><span class="w">    </span><span class="c1">// ...</span>
<a id="__codelineno-22-25" name="__codelineno-22-25"></a><span class="k">private</span><span class="o">:</span>
<a id="__codelineno-22-26" name="__codelineno-22-26"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">rad</span><span class="p">;</span>
<a id="__codelineno-22-27" name="__codelineno-22-27"></a><span class="p">};</span>
<a id="__codelineno-22-28" name="__codelineno-22-28"></a>
<a id="__codelineno-22-29" name="__codelineno-22-29"></a><span class="k">class</span><span class="w"> </span><span class="nc">Triangle</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">Shape</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-22-30" name="__codelineno-22-30"></a><span class="k">public</span><span class="o">:</span>
<a id="__codelineno-22-31" name="__codelineno-22-31"></a><span class="w">    </span><span class="n">Triangle</span><span class="p">(</span><span class="n">Point</span><span class="w"> </span><span class="n">p1</span><span class="p">,</span><span class="w"> </span><span class="n">Point</span><span class="w"> </span><span class="n">p2</span><span class="p">,</span><span class="w"> </span><span class="n">Point</span><span class="w"> </span><span class="n">p3</span><span class="p">);</span><span class="w"> </span><span class="c1">// calculate center</span>
<a id="__codelineno-22-32" name="__codelineno-22-32"></a><span class="w">    </span><span class="c1">// ...</span>
<a id="__codelineno-22-33" name="__codelineno-22-33"></a><span class="p">};</span>
</code></pre></div></td></tr></table></div>
<p>Problems:</p>
<ul>
<li>As the hierarchy grows and more data is added to Shape, the constructors get harder to write and maintain.</li>
<li>Why calculate the center for the Triangle? we might never use it.</li>
<li>Add a data member to Shape (e.g., drawing style or canvas) and all classes derived from Shape and all code
  using Shape will need to be reviewed, possibly changed, and probably recompiled.</li>
</ul>
<p>The implementation of <code class="highlight"><span class="n">Shape</span><span class="o">::</span><span class="n">move</span><span class="p">()</span></code> is an example of implementation inheritance: we have defined
<code>move()</code> once and for all for all derived classes. The more code there is in such base class member function
implementations and the more data is shared by placing it in the base, the more benefits we gain &mdash; and the
less stable the hierarchy is.</p>
<p>This <code>Shape</code> hierarchy can be rewritten using interface inheritance:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-23-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-23-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-23-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-23-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-23-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-23-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-23-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-23-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-23-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-23-10">10</a></span>
<span class="normal"><a href="#__codelineno-23-11">11</a></span>
<span class="normal"><a href="#__codelineno-23-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">Shape</span><span class="w"> </span><span class="p">{</span><span class="w">  </span><span class="c1">// pure interface</span>
<a id="__codelineno-23-2" name="__codelineno-23-2"></a><span class="k">public</span><span class="o">:</span>
<a id="__codelineno-23-3" name="__codelineno-23-3"></a><span class="w">    </span><span class="k">virtual</span><span class="w"> </span><span class="n">Point</span><span class="w"> </span><span class="n">center</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-23-4" name="__codelineno-23-4"></a><span class="w">    </span><span class="k">virtual</span><span class="w"> </span><span class="n">Color</span><span class="w"> </span><span class="nf">color</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-23-5" name="__codelineno-23-5"></a>
<a id="__codelineno-23-6" name="__codelineno-23-6"></a><span class="w">    </span><span class="k">virtual</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">rotate</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-23-7" name="__codelineno-23-7"></a><span class="w">    </span><span class="k">virtual</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">move</span><span class="p">(</span><span class="n">Point</span><span class="w"> </span><span class="n">p</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-23-8" name="__codelineno-23-8"></a>
<a id="__codelineno-23-9" name="__codelineno-23-9"></a><span class="w">    </span><span class="k">virtual</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">redraw</span><span class="p">()</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-23-10" name="__codelineno-23-10"></a>
<a id="__codelineno-23-11" name="__codelineno-23-11"></a><span class="w">    </span><span class="c1">// ...</span>
<a id="__codelineno-23-12" name="__codelineno-23-12"></a><span class="p">};</span>
</code></pre></div></td></tr></table></div>
<p>Note that a pure interface rarely has constructors: there is nothing to construct.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-24-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-24-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-24-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-24-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-24-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-24-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-24-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-24-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-24-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-24-10">10</a></span>
<span class="normal"><a href="#__codelineno-24-11">11</a></span>
<span class="normal"><a href="#__codelineno-24-12">12</a></span>
<span class="normal"><a href="#__codelineno-24-13">13</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">Circle</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">Shape</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-24-2" name="__codelineno-24-2"></a><span class="k">public</span><span class="o">:</span>
<a id="__codelineno-24-3" name="__codelineno-24-3"></a><span class="w">    </span><span class="n">Circle</span><span class="p">(</span><span class="n">Point</span><span class="w"> </span><span class="n">c</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">r</span><span class="p">,</span><span class="w"> </span><span class="n">Color</span><span class="w"> </span><span class="n">c</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">cent</span><span class="p">{</span><span class="n">c</span><span class="p">},</span><span class="w"> </span><span class="n">rad</span><span class="p">{</span><span class="n">r</span><span class="p">},</span><span class="w"> </span><span class="n">col</span><span class="p">{</span><span class="n">c</span><span class="p">}</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="cm">/* ... */</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-24-4" name="__codelineno-24-4"></a>
<a id="__codelineno-24-5" name="__codelineno-24-5"></a><span class="w">    </span><span class="n">Point</span><span class="w"> </span><span class="n">center</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="k">override</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">cent</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-24-6" name="__codelineno-24-6"></a><span class="w">    </span><span class="n">Color</span><span class="w"> </span><span class="n">color</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="k">override</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">col</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-24-7" name="__codelineno-24-7"></a>
<a id="__codelineno-24-8" name="__codelineno-24-8"></a><span class="w">    </span><span class="c1">// ...</span>
<a id="__codelineno-24-9" name="__codelineno-24-9"></a><span class="k">private</span><span class="o">:</span>
<a id="__codelineno-24-10" name="__codelineno-24-10"></a><span class="w">    </span><span class="n">Point</span><span class="w"> </span><span class="n">cent</span><span class="p">;</span>
<a id="__codelineno-24-11" name="__codelineno-24-11"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">rad</span><span class="p">;</span>
<a id="__codelineno-24-12" name="__codelineno-24-12"></a><span class="w">    </span><span class="n">Color</span><span class="w"> </span><span class="n">col</span><span class="p">;</span>
<a id="__codelineno-24-13" name="__codelineno-24-13"></a><span class="p">};</span>
</code></pre></div></td></tr></table></div>
<p>The interface is now less brittle, but there is more work in implementing the member functions.
For example, center has to be implemented by every class derived from Shape.</p>
<h5 id="dual-hierarchy">Dual hierarchy<a class="headerlink" href="#dual-hierarchy" title="Permanent link">&para;</a></h5>
<p>How can we gain the benefit of stable hierarchies from implementation hierarchies and the benefit of
implementation reuse from implementation inheritance? One popular technique is dual hierarchies. There
are many ways of implementing the idea of dual hierarchies; here, we use a multiple-inheritance variant.</p>
<p>First we devise a hierarchy of interface classes:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-25-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-25-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-25-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-25-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-25-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-25-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-25-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-25-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-25-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-25-10">10</a></span>
<span class="normal"><a href="#__codelineno-25-11">11</a></span>
<span class="normal"><a href="#__codelineno-25-12">12</a></span>
<span class="normal"><a href="#__codelineno-25-13">13</a></span>
<span class="normal"><a href="#__codelineno-25-14">14</a></span>
<span class="normal"><a href="#__codelineno-25-15">15</a></span>
<span class="normal"><a href="#__codelineno-25-16">16</a></span>
<span class="normal"><a href="#__codelineno-25-17">17</a></span>
<span class="normal"><a href="#__codelineno-25-18">18</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">Shape</span><span class="w"> </span><span class="p">{</span><span class="w">   </span><span class="c1">// pure interface</span>
<a id="__codelineno-25-2" name="__codelineno-25-2"></a><span class="k">public</span><span class="o">:</span>
<a id="__codelineno-25-3" name="__codelineno-25-3"></a><span class="w">    </span><span class="k">virtual</span><span class="w"> </span><span class="n">Point</span><span class="w"> </span><span class="n">center</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-25-4" name="__codelineno-25-4"></a><span class="w">    </span><span class="k">virtual</span><span class="w"> </span><span class="n">Color</span><span class="w"> </span><span class="nf">color</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-25-5" name="__codelineno-25-5"></a>
<a id="__codelineno-25-6" name="__codelineno-25-6"></a><span class="w">    </span><span class="k">virtual</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">rotate</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-25-7" name="__codelineno-25-7"></a><span class="w">    </span><span class="k">virtual</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">move</span><span class="p">(</span><span class="n">Point</span><span class="w"> </span><span class="n">p</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-25-8" name="__codelineno-25-8"></a>
<a id="__codelineno-25-9" name="__codelineno-25-9"></a><span class="w">    </span><span class="k">virtual</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">redraw</span><span class="p">()</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-25-10" name="__codelineno-25-10"></a>
<a id="__codelineno-25-11" name="__codelineno-25-11"></a><span class="w">    </span><span class="c1">// ...</span>
<a id="__codelineno-25-12" name="__codelineno-25-12"></a><span class="p">};</span>
<a id="__codelineno-25-13" name="__codelineno-25-13"></a>
<a id="__codelineno-25-14" name="__codelineno-25-14"></a><span class="k">class</span><span class="w"> </span><span class="nc">Circle</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="k">virtual</span><span class="w"> </span><span class="n">Shape</span><span class="w"> </span><span class="p">{</span><span class="w">   </span><span class="c1">// pure interface</span>
<a id="__codelineno-25-15" name="__codelineno-25-15"></a><span class="k">public</span><span class="o">:</span>
<a id="__codelineno-25-16" name="__codelineno-25-16"></a><span class="w">    </span><span class="k">virtual</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">radius</span><span class="p">()</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-25-17" name="__codelineno-25-17"></a><span class="w">    </span><span class="c1">// ...</span>
<a id="__codelineno-25-18" name="__codelineno-25-18"></a><span class="p">};</span>
</code></pre></div></td></tr></table></div>
<p>To make this interface useful, we must provide its implementation classes (here, named equivalently, but
in the <code>Impl</code> namespace):</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-26-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-26-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-26-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-26-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-26-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-26-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-26-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-26-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-26-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-26-10">10</a></span>
<span class="normal"><a href="#__codelineno-26-11">11</a></span>
<span class="normal"><a href="#__codelineno-26-12">12</a></span>
<span class="normal"><a href="#__codelineno-26-13">13</a></span>
<span class="normal"><a href="#__codelineno-26-14">14</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">Impl</span><span class="o">::</span><span class="n">Shape</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="k">virtual</span><span class="w"> </span><span class="o">::</span><span class="n">Shape</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// implementation</span>
<a id="__codelineno-26-2" name="__codelineno-26-2"></a><span class="k">public</span><span class="o">:</span>
<a id="__codelineno-26-3" name="__codelineno-26-3"></a><span class="w">    </span><span class="c1">// constructors, destructor</span>
<a id="__codelineno-26-4" name="__codelineno-26-4"></a><span class="w">    </span><span class="c1">// ...</span>
<a id="__codelineno-26-5" name="__codelineno-26-5"></a><span class="w">    </span><span class="n">Point</span><span class="w"> </span><span class="n">center</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="k">override</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="cm">/* ... */</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-26-6" name="__codelineno-26-6"></a><span class="w">    </span><span class="n">Color</span><span class="w"> </span><span class="n">color</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="k">override</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="cm">/* ... */</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-26-7" name="__codelineno-26-7"></a>
<a id="__codelineno-26-8" name="__codelineno-26-8"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="n">rotate</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="k">override</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="cm">/* ... */</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-26-9" name="__codelineno-26-9"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="n">move</span><span class="p">(</span><span class="n">Point</span><span class="w"> </span><span class="n">p</span><span class="p">)</span><span class="w"> </span><span class="k">override</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="cm">/* ... */</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-26-10" name="__codelineno-26-10"></a>
<a id="__codelineno-26-11" name="__codelineno-26-11"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="n">redraw</span><span class="p">()</span><span class="w"> </span><span class="k">override</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="cm">/* ... */</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-26-12" name="__codelineno-26-12"></a>
<a id="__codelineno-26-13" name="__codelineno-26-13"></a><span class="w">    </span><span class="c1">// ...</span>
<a id="__codelineno-26-14" name="__codelineno-26-14"></a><span class="p">};</span>
</code></pre></div></td></tr></table></div>
<p>Now Shape is a poor example of a class with an implementation, but bear with us because this is just a simple
example of a technique aimed at more complex hierarchies.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-27-1">1</a></span>
<span class="normal"><a href="#__codelineno-27-2">2</a></span>
<span class="normal"><a href="#__codelineno-27-3">3</a></span>
<span class="normal"><a href="#__codelineno-27-4">4</a></span>
<span class="normal"><a href="#__codelineno-27-5">5</a></span>
<span class="normal"><a href="#__codelineno-27-6">6</a></span>
<span class="normal"><a href="#__codelineno-27-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">Impl</span><span class="o">::</span><span class="n">Circle</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="k">virtual</span><span class="w"> </span><span class="o">::</span><span class="n">Circle</span><span class="p">,</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">Impl</span><span class="o">::</span><span class="n">Shape</span><span class="w"> </span><span class="p">{</span><span class="w">   </span><span class="c1">// implementation</span>
<a id="__codelineno-27-2" name="__codelineno-27-2"></a><span class="k">public</span><span class="o">:</span>
<a id="__codelineno-27-3" name="__codelineno-27-3"></a><span class="w">    </span><span class="c1">// constructors, destructor</span>
<a id="__codelineno-27-4" name="__codelineno-27-4"></a>
<a id="__codelineno-27-5" name="__codelineno-27-5"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">radius</span><span class="p">()</span><span class="w"> </span><span class="k">override</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="cm">/* ... */</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-27-6" name="__codelineno-27-6"></a><span class="w">    </span><span class="c1">// ...</span>
<a id="__codelineno-27-7" name="__codelineno-27-7"></a><span class="p">};</span>
</code></pre></div></td></tr></table></div>
<p>And we could extend the hierarchies by adding a <code>Smiley</code> class ( <code>:-)</code> ):</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-28-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-28-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-28-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-28-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-28-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-28-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-28-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-28-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-28-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-28-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">Smiley</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="k">virtual</span><span class="w"> </span><span class="n">Circle</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// pure interface</span>
<a id="__codelineno-28-2" name="__codelineno-28-2"></a><span class="k">public</span><span class="o">:</span>
<a id="__codelineno-28-3" name="__codelineno-28-3"></a><span class="w">    </span><span class="c1">// ...</span>
<a id="__codelineno-28-4" name="__codelineno-28-4"></a><span class="p">};</span>
<a id="__codelineno-28-5" name="__codelineno-28-5"></a>
<a id="__codelineno-28-6" name="__codelineno-28-6"></a><span class="k">class</span><span class="w"> </span><span class="nc">Impl</span><span class="o">::</span><span class="n">Smiley</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="k">virtual</span><span class="w"> </span><span class="o">::</span><span class="n">Smiley</span><span class="p">,</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">Impl</span><span class="o">::</span><span class="n">Circle</span><span class="w"> </span><span class="p">{</span><span class="w">   </span><span class="c1">// implementation</span>
<a id="__codelineno-28-7" name="__codelineno-28-7"></a><span class="k">public</span><span class="o">:</span>
<a id="__codelineno-28-8" name="__codelineno-28-8"></a><span class="w">    </span><span class="c1">// constructors, destructor</span>
<a id="__codelineno-28-9" name="__codelineno-28-9"></a><span class="w">    </span><span class="c1">// ...</span>
<a id="__codelineno-28-10" name="__codelineno-28-10"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>There are now two hierarchies:</p>
<ul>
<li>interface: <code>Smiley</code> -&gt; <code>Circle</code> -&gt; <code>Shape</code></li>
<li>implementation: <code>Impl::Smiley</code> -&gt; <code>Impl::Circle</code> -&gt; <code>Impl::Shape</code></li>
</ul>
<p>Since each implementation is derived from its interface as well as its implementation base class we get a lattice (DAG):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a>Smiley     -&gt;         Circle     -&gt;  Shape
<a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a>  ^                     ^               ^
<a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a>  |                     |               |
<a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a>Impl::Smiley -&gt; Impl::Circle -&gt; Impl::Shape
</code></pre></div>
<p>As mentioned, this is just one way to construct a dual hierarchy.</p>
<p>The implementation hierarchy can be used directly, rather than through the abstract interface.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-30-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-30-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-30-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-30-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-30-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-30-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-30-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-30-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-30-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-30-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1"></a><span class="kt">void</span><span class="w"> </span><span class="nf">work_with_shape</span><span class="p">(</span><span class="n">Shape</span><span class="o">&amp;</span><span class="p">);</span>
<a id="__codelineno-30-2" name="__codelineno-30-2"></a>
<a id="__codelineno-30-3" name="__codelineno-30-3"></a><span class="kt">int</span><span class="w"> </span><span class="nf">user</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-30-4" name="__codelineno-30-4"></a><span class="w">    </span><span class="n">Impl</span><span class="o">::</span><span class="n">Smiley</span><span class="w"> </span><span class="n">my_smiley</span><span class="p">{</span><span class="w"> </span><span class="cm">/* args */</span><span class="w"> </span><span class="p">};</span><span class="w">   </span><span class="c1">// create concrete shape</span>
<a id="__codelineno-30-5" name="__codelineno-30-5"></a><span class="w">    </span><span class="c1">// ...</span>
<a id="__codelineno-30-6" name="__codelineno-30-6"></a><span class="w">    </span><span class="n">my_smiley</span><span class="p">.</span><span class="n">some_member</span><span class="p">();</span><span class="w">        </span><span class="c1">// use implementation class directly</span>
<a id="__codelineno-30-7" name="__codelineno-30-7"></a><span class="w">    </span><span class="c1">// ...</span>
<a id="__codelineno-30-8" name="__codelineno-30-8"></a><span class="w">    </span><span class="n">work_with_shape</span><span class="p">(</span><span class="n">my_smiley</span><span class="p">);</span><span class="w">     </span><span class="c1">// use implementation through abstract interface</span>
<a id="__codelineno-30-9" name="__codelineno-30-9"></a><span class="w">    </span><span class="c1">// ...</span>
<a id="__codelineno-30-10" name="__codelineno-30-10"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>This can be useful when the implementation class has members that are not offered in the abstract interface or if direct
use of a member offers optimization opportunities (e.g., if an implementation member function is final).</p>
<h5 id="note_2">Note<a class="headerlink" href="#note_2" title="Permanent link">&para;</a></h5>
<p>Another (related) technique for separating interface and implementation is Pimpl.</p>
<h5 id="note_3">Note<a class="headerlink" href="#note_3" title="Permanent link">&para;</a></h5>
<p>There is often a choice between offering common functionality as (implemented) base class functions and free-standing
functions (in an implementation namespace). Base classes gives a shorter notation and easier access to shared data
(in the base) at the cost of the functionality being available only to users of the hierarchy.</p>
<h3 id="r37-do-not-pass-a-pointer-or-reference-obtained-from-an-aliased-smart-pointer">R.37: Do not pass a pointer or reference obtained from an aliased smart pointer<a class="headerlink" href="#r37-do-not-pass-a-pointer-or-reference-obtained-from-an-aliased-smart-pointer" title="Permanent link">&para;</a></h3>
<h5 id="reason_3">Reason<a class="headerlink" href="#reason_3" title="Permanent link">&para;</a></h5>
<p>Violating this rule is the number one cause of losing reference counts and finding yourself with a dangling pointer.
Functions should prefer to pass raw pointers and references down call chains. At the top of the call tree where you
obtain the raw pointer or reference from a smart pointer that keeps the object alive. You need to be sure that the
smart pointer cannot inadvertently be reset or reassigned from within the call tree below.</p>
<h5 id="note_4">Note<a class="headerlink" href="#note_4" title="Permanent link">&para;</a></h5>
<p>To do this, sometimes you need to take a local copy of a smart pointer, which firmly keeps the object alive for the
duration of the function and the call tree.</p>
<h5 id="example_1">Example<a class="headerlink" href="#example_1" title="Permanent link">&para;</a></h5>
<p>Consider this code:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-31-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-31-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-31-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-31-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-31-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-31-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-31-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-31-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-31-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-31-10">10</a></span>
<span class="normal"><a href="#__codelineno-31-11">11</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1"></a><span class="c1">// global (static or heap), or aliased local ...</span>
<a id="__codelineno-31-2" name="__codelineno-31-2"></a><span class="n">shared_ptr</span><span class="o">&lt;</span><span class="n">widget</span><span class="o">&gt;</span><span class="w"> </span><span class="n">g_p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">...;</span>
<a id="__codelineno-31-3" name="__codelineno-31-3"></a>
<a id="__codelineno-31-4" name="__codelineno-31-4"></a><span class="kt">void</span><span class="w"> </span><span class="nf">f</span><span class="p">(</span><span class="n">widget</span><span class="o">&amp;</span><span class="w"> </span><span class="n">w</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-31-5" name="__codelineno-31-5"></a><span class="w">    </span><span class="n">g</span><span class="p">();</span>
<a id="__codelineno-31-6" name="__codelineno-31-6"></a><span class="w">    </span><span class="n">use</span><span class="p">(</span><span class="n">w</span><span class="p">);</span><span class="w">  </span><span class="c1">// A</span>
<a id="__codelineno-31-7" name="__codelineno-31-7"></a><span class="p">}</span>
<a id="__codelineno-31-8" name="__codelineno-31-8"></a>
<a id="__codelineno-31-9" name="__codelineno-31-9"></a><span class="kt">void</span><span class="w"> </span><span class="nf">g</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-31-10" name="__codelineno-31-10"></a><span class="w">    </span><span class="n">g_p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">...;</span><span class="w"> </span><span class="c1">// oops, if this was the last shared_ptr to that widget, destroys the widget</span>
<a id="__codelineno-31-11" name="__codelineno-31-11"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>The following should not pass code review:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-32-1">1</a></span>
<span class="normal"><a href="#__codelineno-32-2">2</a></span>
<span class="normal"><a href="#__codelineno-32-3">3</a></span>
<span class="normal"><a href="#__codelineno-32-4">4</a></span>
<span class="normal"><a href="#__codelineno-32-5">5</a></span>
<span class="normal"><a href="#__codelineno-32-6">6</a></span>
<span class="normal"><a href="#__codelineno-32-7">7</a></span>
<span class="normal"><a href="#__codelineno-32-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1"></a><span class="kt">void</span><span class="w"> </span><span class="nf">my_code</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-32-2" name="__codelineno-32-2"></a><span class="w">    </span><span class="c1">// BAD: passing pointer or reference obtained from a non-local smart pointer</span>
<a id="__codelineno-32-3" name="__codelineno-32-3"></a><span class="w">    </span><span class="c1">//      that could be inadvertently reset somewhere inside f or its callees</span>
<a id="__codelineno-32-4" name="__codelineno-32-4"></a><span class="w">    </span><span class="n">f</span><span class="p">(</span><span class="o">*</span><span class="n">g_p</span><span class="p">);</span>
<a id="__codelineno-32-5" name="__codelineno-32-5"></a>
<a id="__codelineno-32-6" name="__codelineno-32-6"></a><span class="w">    </span><span class="c1">// BAD: same reason, just passing it as a &quot;this&quot; pointer</span>
<a id="__codelineno-32-7" name="__codelineno-32-7"></a><span class="w">    </span><span class="n">g_p</span><span class="o">-&gt;</span><span class="n">func</span><span class="p">();</span>
<a id="__codelineno-32-8" name="__codelineno-32-8"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<p>The fix is simple &mdash; take a local copy of the pointer to &ldquo;keep a ref count&rdquo; for your call tree:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-33-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-33-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-33-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-33-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-33-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-33-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-33-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-33-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-33-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-33-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1"></a><span class="kt">void</span><span class="w"> </span><span class="nf">my_code</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-33-2" name="__codelineno-33-2"></a><span class="w">    </span><span class="c1">// cheap: 1 increment covers this entire function and all the call trees below us</span>
<a id="__codelineno-33-3" name="__codelineno-33-3"></a><span class="w">    </span><span class="k">auto</span><span class="w"> </span><span class="n">pin</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">g_p</span><span class="p">;</span>
<a id="__codelineno-33-4" name="__codelineno-33-4"></a>
<a id="__codelineno-33-5" name="__codelineno-33-5"></a><span class="w">    </span><span class="c1">// GOOD: passing pointer or reference obtained from a local unaliased smart pointer</span>
<a id="__codelineno-33-6" name="__codelineno-33-6"></a><span class="w">    </span><span class="n">f</span><span class="p">(</span><span class="o">*</span><span class="n">pin</span><span class="p">);</span>
<a id="__codelineno-33-7" name="__codelineno-33-7"></a>
<a id="__codelineno-33-8" name="__codelineno-33-8"></a><span class="w">    </span><span class="c1">// GOOD: same reason</span>
<a id="__codelineno-33-9" name="__codelineno-33-9"></a><span class="w">    </span><span class="n">pin</span><span class="o">-&gt;</span><span class="n">func</span><span class="p">();</span>
<a id="__codelineno-33-10" name="__codelineno-33-10"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<h3 id="es50-dont-cast-away-const">ES.50: Don&rsquo;t cast away const<a class="headerlink" href="#es50-dont-cast-away-const" title="Permanent link">&para;</a></h3>
<h5 id="reason_4">Reason<a class="headerlink" href="#reason_4" title="Permanent link">&para;</a></h5>
<p>It makes a lie out of <code>const</code>. If the variable is actually declared <code>const</code>, modifying it results in undefined behavior.</p>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Example, bad</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-34-1">1</a></span>
<span class="normal"><a href="#__codelineno-34-2">2</a></span>
<span class="normal"><a href="#__codelineno-34-3">3</a></span>
<span class="normal"><a href="#__codelineno-34-4">4</a></span>
<span class="normal"><a href="#__codelineno-34-5">5</a></span>
<span class="normal"><a href="#__codelineno-34-6">6</a></span>
<span class="normal"><a href="#__codelineno-34-7">7</a></span>
<span class="normal"><a href="#__codelineno-34-8">8</a></span>
<span class="normal"><a href="#__codelineno-34-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1"></a><span class="kt">void</span><span class="w"> </span><span class="nf">f</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="o">&amp;</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-34-2" name="__codelineno-34-2"></a><span class="w">    </span><span class="k">const_cast</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&amp;&gt;</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">42</span><span class="p">;</span><span class="w">   </span><span class="c1">// BAD</span>
<a id="__codelineno-34-3" name="__codelineno-34-3"></a><span class="p">}</span>
<a id="__codelineno-34-4" name="__codelineno-34-4"></a>
<a id="__codelineno-34-5" name="__codelineno-34-5"></a><span class="k">static</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-34-6" name="__codelineno-34-6"></a><span class="k">static</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">j</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<a id="__codelineno-34-7" name="__codelineno-34-7"></a>
<a id="__codelineno-34-8" name="__codelineno-34-8"></a><span class="n">f</span><span class="p">(</span><span class="n">i</span><span class="p">);</span><span class="w"> </span><span class="c1">// silent side effect</span>
<a id="__codelineno-34-9" name="__codelineno-34-9"></a><span class="n">f</span><span class="p">(</span><span class="n">j</span><span class="p">);</span><span class="w"> </span><span class="c1">// undefined behavior</span>
</code></pre></div></td></tr></table></div>
<h5 id="example_2">Example<a class="headerlink" href="#example_2" title="Permanent link">&para;</a></h5>
<p>Sometimes, you might be tempted to resort to <code>const_cast</code> to avoid code duplication, such as when two accessor functions
that differ only in const-ness have similar implementations. For example:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-35-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-35-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-35-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-35-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-35-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-35-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-35-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-35-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-35-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-35-10">10</a></span>
<span class="normal"><a href="#__codelineno-35-11">11</a></span>
<span class="normal"><a href="#__codelineno-35-12">12</a></span>
<span class="normal"><a href="#__codelineno-35-13">13</a></span>
<span class="normal"><a href="#__codelineno-35-14">14</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">Bar</span><span class="p">;</span>
<a id="__codelineno-35-2" name="__codelineno-35-2"></a>
<a id="__codelineno-35-3" name="__codelineno-35-3"></a><span class="k">class</span><span class="w"> </span><span class="nc">Foo</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-35-4" name="__codelineno-35-4"></a><span class="k">public</span><span class="o">:</span>
<a id="__codelineno-35-5" name="__codelineno-35-5"></a><span class="w">    </span><span class="c1">// BAD, duplicates logic</span>
<a id="__codelineno-35-6" name="__codelineno-35-6"></a><span class="w">    </span><span class="n">Bar</span><span class="o">&amp;</span><span class="w"> </span><span class="n">get_bar</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-35-7" name="__codelineno-35-7"></a><span class="w">        </span><span class="cm">/* complex logic around getting a non-const reference to my_bar */</span>
<a id="__codelineno-35-8" name="__codelineno-35-8"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-35-9" name="__codelineno-35-9"></a><span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">Bar</span><span class="o">&amp;</span><span class="w"> </span><span class="n">get_bar</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-35-10" name="__codelineno-35-10"></a><span class="w">        </span><span class="cm">/* same complex logic around getting a const reference to my_bar */</span>
<a id="__codelineno-35-11" name="__codelineno-35-11"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-35-12" name="__codelineno-35-12"></a><span class="k">private</span><span class="o">:</span>
<a id="__codelineno-35-13" name="__codelineno-35-13"></a><span class="w">    </span><span class="n">Bar</span><span class="w"> </span><span class="n">my_bar</span><span class="p">;</span>
<a id="__codelineno-35-14" name="__codelineno-35-14"></a><span class="p">};</span>
</code></pre></div></td></tr></table></div>
<p>Instead, prefer to share implementations. Normally, you can just have the non-const function call the const function.
However, when there is complex logic this can lead to the following pattern that still resorts to a const_cast:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-36-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-36-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-36-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-36-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-36-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-36-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-36-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-36-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-36-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-36-10">10</a></span>
<span class="normal"><a href="#__codelineno-36-11">11</a></span>
<span class="normal"><a href="#__codelineno-36-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">Foo</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-36-2" name="__codelineno-36-2"></a><span class="k">public</span><span class="o">:</span>
<a id="__codelineno-36-3" name="__codelineno-36-3"></a><span class="w">    </span><span class="c1">// not great, non-const calls const version but resorts to const_cast</span>
<a id="__codelineno-36-4" name="__codelineno-36-4"></a><span class="w">    </span><span class="n">Bar</span><span class="o">&amp;</span><span class="w"> </span><span class="n">get_bar</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-36-5" name="__codelineno-36-5"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="k">const_cast</span><span class="o">&lt;</span><span class="n">Bar</span><span class="o">&amp;&gt;</span><span class="p">(</span><span class="k">static_cast</span><span class="o">&lt;</span><span class="k">const</span><span class="w"> </span><span class="n">Foo</span><span class="o">&amp;&gt;</span><span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">).</span><span class="n">get_bar</span><span class="p">());</span>
<a id="__codelineno-36-6" name="__codelineno-36-6"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-36-7" name="__codelineno-36-7"></a><span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">Bar</span><span class="o">&amp;</span><span class="w"> </span><span class="n">get_bar</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-36-8" name="__codelineno-36-8"></a><span class="w">        </span><span class="cm">/* the complex logic around getting a const reference to my_bar */</span>
<a id="__codelineno-36-9" name="__codelineno-36-9"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-36-10" name="__codelineno-36-10"></a><span class="k">private</span><span class="o">:</span>
<a id="__codelineno-36-11" name="__codelineno-36-11"></a><span class="w">    </span><span class="n">Bar</span><span class="w"> </span><span class="n">my_bar</span><span class="p">;</span>
<a id="__codelineno-36-12" name="__codelineno-36-12"></a><span class="p">};</span>
</code></pre></div></td></tr></table></div>
<p>Although this pattern is safe when applied correctly, because the caller must have had a non-const object to begin
with, it&rsquo;s not ideal because the safety is hard to enforce automatically as a checker rule.</p>
<p>Instead, prefer to put the common code in a common helper function &mdash; and make it a template so that it deduces <code>const</code>.
This doesn&rsquo;t use any <code>const_cast</code> at all:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-37-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-37-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-37-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-37-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-37-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-37-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-37-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-37-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-37-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-37-10">10</a></span>
<span class="normal"><a href="#__codelineno-37-11">11</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">Foo</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-37-2" name="__codelineno-37-2"></a><span class="k">public</span><span class="o">:</span><span class="w">                         </span><span class="c1">// good</span>
<a id="__codelineno-37-3" name="__codelineno-37-3"></a><span class="w">          </span><span class="n">Bar</span><span class="o">&amp;</span><span class="w"> </span><span class="n">get_bar</span><span class="p">()</span><span class="w">       </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">get_bar_impl</span><span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-37-4" name="__codelineno-37-4"></a><span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">Bar</span><span class="o">&amp;</span><span class="w"> </span><span class="n">get_bar</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">get_bar_impl</span><span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-37-5" name="__codelineno-37-5"></a><span class="k">private</span><span class="o">:</span>
<a id="__codelineno-37-6" name="__codelineno-37-6"></a><span class="w">    </span><span class="n">Bar</span><span class="w"> </span><span class="n">my_bar</span><span class="p">;</span>
<a id="__codelineno-37-7" name="__codelineno-37-7"></a>
<a id="__codelineno-37-8" name="__codelineno-37-8"></a><span class="w">    </span><span class="k">template</span><span class="o">&lt;</span><span class="k">class</span><span class="w"> </span><span class="nc">T</span><span class="o">&gt;</span><span class="w">           </span><span class="c1">// good, deduces whether T is const or non-const</span>
<a id="__codelineno-37-9" name="__codelineno-37-9"></a><span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="k">auto</span><span class="o">&amp;</span><span class="w"> </span><span class="n">get_bar_impl</span><span class="p">(</span><span class="n">T</span><span class="o">&amp;</span><span class="w"> </span><span class="n">t</span><span class="p">)</span>
<a id="__codelineno-37-10" name="__codelineno-37-10"></a><span class="w">        </span><span class="p">{</span><span class="w"> </span><span class="cm">/* the complex logic around getting a possibly-const reference to my_bar */</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-37-11" name="__codelineno-37-11"></a><span class="p">};</span>
</code></pre></div></td></tr></table></div>
<p>Note: Don&rsquo;t do large non-dependent work inside a template, which leads to code bloat. For example, a further improvement
would be if all or part of <code>get_bar_impl</code> can be non-dependent and factored out into a common non-template function,
for a potentially big reduction in code size.</p>
<h5 id="exception">Exception<a class="headerlink" href="#exception" title="Permanent link">&para;</a></h5>
<p>You might need to cast away <code>const</code> when calling const-incorrect functions. Prefer to wrap such functions in inline
const-correct wrappers to encapsulate the cast in one place.</p>
<h5 id="example_3">Example<a class="headerlink" href="#example_3" title="Permanent link">&para;</a></h5>
<p>Sometimes, &ldquo;cast away const&rdquo; is to allow the updating of some transient information of an otherwise immutable object.
Examples are caching, memoization, and precomputation. Such examples are often handled as well or better using mutable
or an indirection than with a <code>const_cast</code>.</p>
<p>Consider keeping previously computed results around for a costly operation:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-38-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-38-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-38-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-38-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-38-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-38-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-38-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-38-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-38-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-38-10">10</a></span>
<span class="normal"><a href="#__codelineno-38-11">11</a></span>
<span class="normal"><a href="#__codelineno-38-12">12</a></span>
<span class="normal"><a href="#__codelineno-38-13">13</a></span>
<span class="normal"><a href="#__codelineno-38-14">14</a></span>
<span class="normal"><a href="#__codelineno-38-15">15</a></span>
<span class="normal"><a href="#__codelineno-38-16">16</a></span>
<span class="normal"><a href="#__codelineno-38-17">17</a></span>
<span class="normal"><a href="#__codelineno-38-18">18</a></span>
<span class="normal"><a href="#__codelineno-38-19">19</a></span>
<span class="normal"><a href="#__codelineno-38-20">20</a></span>
<span class="normal"><a href="#__codelineno-38-21">21</a></span>
<span class="normal"><a href="#__codelineno-38-22">22</a></span>
<span class="normal"><a href="#__codelineno-38-23">23</a></span>
<span class="normal"><a href="#__codelineno-38-24">24</a></span>
<span class="normal"><a href="#__codelineno-38-25">25</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1"></a><span class="kt">int</span><span class="w"> </span><span class="nf">compute</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">);</span><span class="w"> </span><span class="c1">// compute a value for x; assume this to be costly</span>
<a id="__codelineno-38-2" name="__codelineno-38-2"></a>
<a id="__codelineno-38-3" name="__codelineno-38-3"></a><span class="k">class</span><span class="w"> </span><span class="nc">Cache</span><span class="w"> </span><span class="p">{</span><span class="w">   </span><span class="c1">// some type implementing a cache for an int-&gt;int operation</span>
<a id="__codelineno-38-4" name="__codelineno-38-4"></a><span class="k">public</span><span class="o">:</span>
<a id="__codelineno-38-5" name="__codelineno-38-5"></a><span class="w">    </span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">bool</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">find</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="p">;</span><span class="w">  </span><span class="c1">// is there a value for x?</span>
<a id="__codelineno-38-6" name="__codelineno-38-6"></a><span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">set</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">v</span><span class="p">);</span><span class="w">             </span><span class="c1">// make y the value for x</span>
<a id="__codelineno-38-7" name="__codelineno-38-7"></a><span class="w">    </span><span class="c1">// ...</span>
<a id="__codelineno-38-8" name="__codelineno-38-8"></a><span class="k">private</span><span class="o">:</span>
<a id="__codelineno-38-9" name="__codelineno-38-9"></a><span class="w">    </span><span class="c1">// ...</span>
<a id="__codelineno-38-10" name="__codelineno-38-10"></a><span class="p">};</span>
<a id="__codelineno-38-11" name="__codelineno-38-11"></a>
<a id="__codelineno-38-12" name="__codelineno-38-12"></a><span class="k">class</span><span class="w"> </span><span class="nc">X</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-38-13" name="__codelineno-38-13"></a><span class="k">public</span><span class="o">:</span>
<a id="__codelineno-38-14" name="__codelineno-38-14"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">get_val</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w">  </span><span class="p">{</span>
<a id="__codelineno-38-15" name="__codelineno-38-15"></a><span class="w">        </span><span class="k">auto</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cache</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
<a id="__codelineno-38-16" name="__codelineno-38-16"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">first</span><span class="p">)</span><span class="w"> </span>
<a id="__codelineno-38-17" name="__codelineno-38-17"></a><span class="w">           </span><span class="k">return</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">second</span><span class="p">;</span>
<a id="__codelineno-38-18" name="__codelineno-38-18"></a><span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">val</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">compute</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
<a id="__codelineno-38-19" name="__codelineno-38-19"></a><span class="w">        </span><span class="n">cache</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">val</span><span class="p">);</span><span class="w"> </span><span class="c1">// insert value for x</span>
<a id="__codelineno-38-20" name="__codelineno-38-20"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">val</span><span class="p">;</span>
<a id="__codelineno-38-21" name="__codelineno-38-21"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-38-22" name="__codelineno-38-22"></a><span class="w">    </span><span class="c1">// ...</span>
<a id="__codelineno-38-23" name="__codelineno-38-23"></a><span class="k">private</span><span class="o">:</span>
<a id="__codelineno-38-24" name="__codelineno-38-24"></a><span class="w">    </span><span class="n">Cache</span><span class="w"> </span><span class="n">cache</span><span class="p">;</span>
<a id="__codelineno-38-25" name="__codelineno-38-25"></a><span class="p">};</span>
</code></pre></div></td></tr></table></div>
<p>Here, <code>get_val()</code> is logically constant, so we would like to make it a <code>const</code> member. To do this we still need to mutate cache,
so people sometimes resort to a <code>const_cast</code>:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-39-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-39-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-39-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-39-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-39-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-39-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-39-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-39-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-39-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-39-10">10</a></span>
<span class="normal"><a href="#__codelineno-39-11">11</a></span>
<span class="normal"><a href="#__codelineno-39-12">12</a></span>
<span class="normal"><a href="#__codelineno-39-13">13</a></span>
<span class="normal"><a href="#__codelineno-39-14">14</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">X</span><span class="w"> </span><span class="p">{</span><span class="w">   </span><span class="c1">// Suspicious solution based on casting</span>
<a id="__codelineno-39-2" name="__codelineno-39-2"></a><span class="k">public</span><span class="o">:</span>
<a id="__codelineno-39-3" name="__codelineno-39-3"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">get_val</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="w">  </span><span class="p">{</span>
<a id="__codelineno-39-4" name="__codelineno-39-4"></a><span class="w">        </span><span class="k">auto</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cache</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
<a id="__codelineno-39-5" name="__codelineno-39-5"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">first</span><span class="p">)</span><span class="w"> </span>
<a id="__codelineno-39-6" name="__codelineno-39-6"></a><span class="w">           </span><span class="k">return</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">second</span><span class="p">;</span>
<a id="__codelineno-39-7" name="__codelineno-39-7"></a><span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">val</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">compute</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
<a id="__codelineno-39-8" name="__codelineno-39-8"></a><span class="w">        </span><span class="k">const_cast</span><span class="o">&lt;</span><span class="n">Cache</span><span class="o">&amp;&gt;</span><span class="p">(</span><span class="n">cache</span><span class="p">).</span><span class="n">set</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">val</span><span class="p">);</span><span class="w">   </span><span class="c1">// ugly</span>
<a id="__codelineno-39-9" name="__codelineno-39-9"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">val</span><span class="p">;</span>
<a id="__codelineno-39-10" name="__codelineno-39-10"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-39-11" name="__codelineno-39-11"></a><span class="w">    </span><span class="c1">// ...</span>
<a id="__codelineno-39-12" name="__codelineno-39-12"></a><span class="k">private</span><span class="o">:</span>
<a id="__codelineno-39-13" name="__codelineno-39-13"></a><span class="w">    </span><span class="n">Cache</span><span class="w"> </span><span class="n">cache</span><span class="p">;</span>
<a id="__codelineno-39-14" name="__codelineno-39-14"></a><span class="p">};</span>
</code></pre></div></td></tr></table></div>
<p>Fortunately, there is a better solution: State that cache is mutable even for a const object:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-40-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-40-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-40-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-40-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-40-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-40-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-40-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-40-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-40-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-40-10">10</a></span>
<span class="normal"><a href="#__codelineno-40-11">11</a></span>
<span class="normal"><a href="#__codelineno-40-12">12</a></span>
<span class="normal"><a href="#__codelineno-40-13">13</a></span>
<span class="normal"><a href="#__codelineno-40-14">14</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-40-1" name="__codelineno-40-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">X</span><span class="w"> </span><span class="p">{</span><span class="w">   </span><span class="c1">// better solution</span>
<a id="__codelineno-40-2" name="__codelineno-40-2"></a><span class="k">public</span><span class="o">:</span>
<a id="__codelineno-40-3" name="__codelineno-40-3"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">get_val</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-40-4" name="__codelineno-40-4"></a><span class="w">        </span><span class="k">auto</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cache</span><span class="p">.</span><span class="n">find</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
<a id="__codelineno-40-5" name="__codelineno-40-5"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">first</span><span class="p">)</span><span class="w"> </span>
<a id="__codelineno-40-6" name="__codelineno-40-6"></a><span class="w">           </span><span class="k">return</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">second</span><span class="p">;</span>
<a id="__codelineno-40-7" name="__codelineno-40-7"></a><span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">val</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">compute</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
<a id="__codelineno-40-8" name="__codelineno-40-8"></a><span class="w">        </span><span class="n">cache</span><span class="p">.</span><span class="n">set</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">val</span><span class="p">);</span>
<a id="__codelineno-40-9" name="__codelineno-40-9"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">val</span><span class="p">;</span>
<a id="__codelineno-40-10" name="__codelineno-40-10"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-40-11" name="__codelineno-40-11"></a><span class="w">    </span><span class="c1">// ...</span>
<a id="__codelineno-40-12" name="__codelineno-40-12"></a><span class="k">private</span><span class="o">:</span>
<a id="__codelineno-40-13" name="__codelineno-40-13"></a><span class="w">    </span><span class="k">mutable</span><span class="w"> </span><span class="n">Cache</span><span class="w"> </span><span class="n">cache</span><span class="p">;</span>
<a id="__codelineno-40-14" name="__codelineno-40-14"></a><span class="p">};</span>
</code></pre></div></td></tr></table></div>
<p>An alternative solution would be to store a pointer to the cache:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-41-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-41-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-41-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-41-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-41-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-41-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-41-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-41-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-41-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-41-10">10</a></span>
<span class="normal"><a href="#__codelineno-41-11">11</a></span>
<span class="normal"><a href="#__codelineno-41-12">12</a></span>
<span class="normal"><a href="#__codelineno-41-13">13</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-41-1" name="__codelineno-41-1"></a><span class="k">class</span><span class="w"> </span><span class="nc">X</span><span class="w"> </span><span class="p">{</span><span class="w">   </span><span class="c1">// OK, but slightly messier solution</span>
<a id="__codelineno-41-2" name="__codelineno-41-2"></a><span class="k">public</span><span class="o">:</span>
<a id="__codelineno-41-3" name="__codelineno-41-3"></a><span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">get_val</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-41-4" name="__codelineno-41-4"></a><span class="w">        </span><span class="k">auto</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cache</span><span class="o">-&gt;</span><span class="n">find</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
<a id="__codelineno-41-5" name="__codelineno-41-5"></a><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">p</span><span class="p">.</span><span class="n">first</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">second</span><span class="p">;</span>
<a id="__codelineno-41-6" name="__codelineno-41-6"></a><span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">val</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">compute</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
<a id="__codelineno-41-7" name="__codelineno-41-7"></a><span class="w">        </span><span class="n">cache</span><span class="o">-&gt;</span><span class="n">set</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">val</span><span class="p">);</span>
<a id="__codelineno-41-8" name="__codelineno-41-8"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">val</span><span class="p">;</span>
<a id="__codelineno-41-9" name="__codelineno-41-9"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-41-10" name="__codelineno-41-10"></a><span class="w">    </span><span class="c1">// ...</span>
<a id="__codelineno-41-11" name="__codelineno-41-11"></a><span class="k">private</span><span class="o">:</span>
<a id="__codelineno-41-12" name="__codelineno-41-12"></a><span class="w">    </span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="n">Cache</span><span class="o">&gt;</span><span class="w"> </span><span class="n">cache</span><span class="p">;</span>
<a id="__codelineno-41-13" name="__codelineno-41-13"></a><span class="p">};</span>
</code></pre></div></td></tr></table></div>
<p>That solution is the most flexible, but requires explicit construction and destruction of <code>*cache</code> (most likely in the constructor and destructor of X).</p>
<p>In any variant, we must guard against data races on the cache in multi-threaded code, possibly using a <code>std::mutex</code>.</p>







  
  






                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tracking", "navigation.tabs", "navigation.expand", "navigation.top", "content.tabs.link", "content.code.annotate"], "search": "../assets/javascripts/workers/search.c7c1ca2c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.203fd0bc.min.js"></script>
      
        <script src="../assets/javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>